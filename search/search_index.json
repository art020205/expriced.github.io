{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u0421\u0442\u0443\u0434\u0435\u043d\u0442: \u0422\u0443\u0440\u0438\u0449\u0435\u0432 \u0410\u0440\u0442\u0451\u043c \u0413\u0440\u0443\u043f\u043f\u0430: K3340","title":"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},{"location":"lab_1/conclusion/","text":"\u0412 \u0445\u043e\u0434\u0435 \u044d\u0442\u043e\u0439 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b, \u044f \u043d\u0430\u0443\u0447\u0438\u043b\u0441\u044f \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u0441\u043e\u043a\u0435\u0442\u0430\u043c\u0438 \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 socket \u043d\u0430 python, \u0441\u043e\u0437\u0434\u0430\u043b \u043f\u0440\u043e\u0441\u0442\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u044b\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0434\u043e \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0447\u0430\u0442\u0430 \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 http \u0437\u0430\u043f\u0440\u0441\u043e\u043e\u0432.","title":"\u0412\u044b\u0432\u043e\u0434"},{"location":"lab_1/task_1/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, server\u00bb, \u0438 \u043e\u043d\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0412 \u043e\u0442\u0432\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, client\u00bb, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043b \u043f\u0440\u043e\u0441\u0442\u043e\u0435 \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c UDP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0431\u043c\u0435\u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) conn.bind((HOST, PORT)) data, addr = conn.recvfrom(1024) msg = data.decode('utf-8') print(f\"recieved message: {msg}\") if msg == \"Hello, server\": ans_message = \"Hello, client\" conn.sendto(ans_message.encode(), addr) else: print(\"Unknow message recieved\") conn.close() client.py import socket from config import HOST, PORT msg = \"Hello, server\" conn = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) conn.connect((HOST, PORT)) conn.send(msg.encode()) response = conn.recv(1024) print(f\"response: {response.decode(\"utf-8\")}\") config.py HOST = \"127.0.0.1\" PORT = 14900","title":"\u0417\u0430\u0434\u0430\u0447\u0430_1"},{"location":"lab_1/task_1/#1","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1"},{"location":"lab_1/task_1/#_1","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, server\u00bb, \u0438 \u043e\u043d\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0412 \u043e\u0442\u0432\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, client\u00bb, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_1/#_2","text":"\u0411\u044b\u043b\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043b \u043f\u0440\u043e\u0441\u0442\u043e\u0435 \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c UDP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0431\u043c\u0435\u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_1/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_1/#serverpy","text":"import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) conn.bind((HOST, PORT)) data, addr = conn.recvfrom(1024) msg = data.decode('utf-8') print(f\"recieved message: {msg}\") if msg == \"Hello, server\": ans_message = \"Hello, client\" conn.sendto(ans_message.encode(), addr) else: print(\"Unknow message recieved\") conn.close()","title":"server.py"},{"location":"lab_1/task_1/#clientpy","text":"import socket from config import HOST, PORT msg = \"Hello, server\" conn = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) conn.connect((HOST, PORT)) conn.send(msg.encode()) response = conn.recv(1024) print(f\"response: {response.decode(\"utf-8\")}\")","title":"client.py"},{"location":"lab_1/task_1/#configpy","text":"HOST = \"127.0.0.1\" PORT = 14900","title":"config.py"},{"location":"lab_1/task_2/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 4: \u041f\u043e\u0438\u0441\u043a \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438, \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0432\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u0441 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b. \u0421\u0435\u0440\u0432\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043f\u043e \u0434\u0432\u0443\u043c \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c \u0438 \u0443\u0433\u043b\u0443 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket from math import sin, radians from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) while True: try: client_socket, addr = conn.accept() print(type(addr), addr) data = client_socket.recv(16384).decode() print(\"\u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0437\u0430\u043f\u0440\u043e\u0441:\", data) a, b, angle = map(float, data.split(\", \")) angle = radians(angle) s = round(a * b * sin(angle), 2) client_socket.send(str(s).encode()) client_socket.close() except KeyboardInterrupt: conn.close() break client.py import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.connect((HOST, PORT)) a = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443(\u043d\u0435\u0446\u0443\u043b\u044b\u0435 \u0447\u0438\u0441\u043b\u0430 \u0447\u0435\u0440\u0435\u0437 \u0442\u043e\u0447\u043a\u0443 \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 1.5)): \") b = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0442\u043e\u0440\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443: \") angle = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0443\u0433\u043e\u043b \u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445: \") msg = \", \".join([a, b, angle]) conn.send(msg.encode()) response = conn.recv(16384).decode() conn.close() print(f\"\u041f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0430\u044f\u0441\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u044c: {response}\") config.py HOST = \"127.0.0.1\" PORT = 14900","title":"\u0417\u0430\u0434\u0430\u0447\u0430_2"},{"location":"lab_1/task_2/#2","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2"},{"location":"lab_1/task_2/#_1","text":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4: \u041f\u043e\u0438\u0441\u043a \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438, \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0432\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u0441 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b. \u0421\u0435\u0440\u0432\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_2/#_2","text":"\u0411\u044b\u043b\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043f\u043e \u0434\u0432\u0443\u043c \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c \u0438 \u0443\u0433\u043b\u0443 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_2/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_2/#serverpy","text":"import socket from math import sin, radians from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) while True: try: client_socket, addr = conn.accept() print(type(addr), addr) data = client_socket.recv(16384).decode() print(\"\u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0437\u0430\u043f\u0440\u043e\u0441:\", data) a, b, angle = map(float, data.split(\", \")) angle = radians(angle) s = round(a * b * sin(angle), 2) client_socket.send(str(s).encode()) client_socket.close() except KeyboardInterrupt: conn.close() break","title":"server.py"},{"location":"lab_1/task_2/#clientpy","text":"import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.connect((HOST, PORT)) a = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443(\u043d\u0435\u0446\u0443\u043b\u044b\u0435 \u0447\u0438\u0441\u043b\u0430 \u0447\u0435\u0440\u0435\u0437 \u0442\u043e\u0447\u043a\u0443 \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 1.5)): \") b = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0442\u043e\u0440\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443: \") angle = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0443\u0433\u043e\u043b \u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445: \") msg = \", \".join([a, b, angle]) conn.send(msg.encode()) response = conn.recv(16384).decode() conn.close() print(f\"\u041f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0430\u044f\u0441\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u044c: {response}\")","title":"client.py"},{"location":"lab_1/task_2/#configpy","text":"HOST = \"127.0.0.1\" PORT = 14900","title":"config.py"},{"location":"lab_1/task_3/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443, \u0438 \u0432 \u043e\u0442\u0432\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 HTTP-\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0435 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 index.html. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u043f\u0440\u043e\u0441\u0442\u043e\u0439 HTTP-\u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u0434\u0430\u0447\u0438 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) while True: try: client_socket, addr = conn.accept() data = client_socket.recv(16384).decode() print(\"\u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0437\u0430\u043f\u0440\u043e\u0441:\", data) response_type = \"HTTP/1.1 200 OK\\r\\n\" headers = \"Content-Type: text/html; charset=utf-8\\r\\n\\r\\n\" with open(\"index.html\", encoding=\"utf-8\") as file: body = file.read() msg = response_type + headers + body client_socket.send(msg.encode()) client_socket.close() except KeyboardInterrupt: conn.close() break config.py HOST = \"127.0.0.1\" PORT = 14900","title":"\u0417\u0430\u0434\u0430\u0447\u0430_3"},{"location":"lab_1/task_3/#3","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3"},{"location":"lab_1/task_3/#_1","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443, \u0438 \u0432 \u043e\u0442\u0432\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 HTTP-\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0435 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 index.html.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_3/#_2","text":"\u0411\u044b\u043b \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u043f\u0440\u043e\u0441\u0442\u043e\u0439 HTTP-\u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u0434\u0430\u0447\u0438 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_3/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_3/#serverpy","text":"import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) while True: try: client_socket, addr = conn.accept() data = client_socket.recv(16384).decode() print(\"\u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0437\u0430\u043f\u0440\u043e\u0441:\", data) response_type = \"HTTP/1.1 200 OK\\r\\n\" headers = \"Content-Type: text/html; charset=utf-8\\r\\n\\r\\n\" with open(\"index.html\", encoding=\"utf-8\") as file: body = file.read() msg = response_type + headers + body client_socket.send(msg.encode()) client_socket.close() except KeyboardInterrupt: conn.close() break","title":"server.py"},{"location":"lab_1/task_3/#configpy","text":"HOST = \"127.0.0.1\" PORT = 14900","title":"config.py"},{"location":"lab_1/task_4/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0432\u0443\u0445\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0438\u043b\u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0414\u043b\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0431\u0430\u043b\u043b\u043e\u0432 \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0439\u0442\u0435 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f: \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b TCP: 100% \u0431\u0430\u043b\u043b\u043e\u0432. \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b UDP: 80% \u0431\u0430\u043b\u043b\u043e\u0432. \u0414\u043b\u044f UDP \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 threading \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0435. \u0414\u043b\u044f TCP \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043e\u0442 \u0432\u0441\u0435\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u043f\u043e\u0442\u043e\u043a\u0430\u0445. \u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0443\u044e threading \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u043e\u043a\u0430 \u043f\u043e\u0434 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u0447\u0430\u0442\u0430, \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0438 2 \u043f\u043e\u0442\u043e\u043a\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043b\u0438 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket import threading from config import HOST, PORT from msg_dataclass import Message clients = [] def send_message(client_socket: socket.socket, msg: Message): global clients msg = str(msg).encode() for client in clients: if client != client_socket: try: client.send(msg) except Exception as e: print(f\"Error {e} while sending message to client, stoping it's connection\") try: client.close() except: pass def process_client(client_socket: socket.socket, addr: tuple): global clients try: print(f\"New user with addr: {addr}\") while True: msg = client_socket.recv(16384).decode() msg = Message.parse_msg(msg) if msg.type == \"quit\": break msg.author = addr[1] send_message(client_socket, msg) except Exception as e: print(f\"error {e} while processing client {addr}\") finally: print(f\"stoping connection and thread for client {addr}\") try: msg = Message(type=\"stop\", author=\"server\") client_socket.send(str(msg).encode()) client_socket.close() except: pass clients.remove(client_socket) conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) try: while True: client_socket, addr = conn.accept() clients.append(client_socket) new_client_thread = threading.Thread(target=process_client, args=(client_socket, addr), daemon=True) new_client_thread.start() except Exception as e: print(f\"Error {e} while server running, trying to send messages of stop, and shutting down\") try: msg = Message(type=\"stop\", author=\"server\") send_message(conn, msg) except: print(\"err\") finally: conn.close() client.py import socket import threading from config import HOST, PORT from msg_dataclass import Message def reciever(conn: socket.socket, stop: threading.Event): while not stop.is_set(): try: msg = conn.recv(16384).decode() msg = Message.parse_msg(msg) if msg.type == \"stop\" and msg.author == \"server\": stop.set() print(f\"recieved stop message from server\") break else: print(f\"{msg.author}: {msg.msg}\") except Exception as e: print(f\"error {e} while recieving\") stop.set() def sender(conn: socket.socket, stop: threading.Event): try: while not stop.is_set(): msg = input() if msg == \"exit\": stop.set() print(\"Exit command recieved\") break msg = Message(msg=msg) conn.send(str(msg).encode()) except Exception as e: print(f\"error {e} during sending msg\") stop.set() print('Type messages to send, type \"exit\" to stop client') conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.connect((HOST, PORT)) stop = threading.Event() reciever_thread = threading.Thread(target=reciever, args=(conn, stop), daemon=True) sender_thread = threading.Thread(target=sender, args=(conn, stop), daemon=True) reciever_thread.start() sender_thread.start() try: while not stop.is_set(): stop.wait(timeout=0.5) except Exception as e: print(f\"Error {e} in client\") finally: try: msg = Message(type=\"quit\") conn.send(str(msg).encode()) except: pass print(\"shutting down client\") try: conn.close() except: pass msg_dataclass.py import json from dataclasses import dataclass, asdict @dataclass class Message: type: str = \"\" msg: str = \"\" author: str = \"self\" def __str__(self): return json.dumps(asdict(self)) @classmethod def parse_msg(cls, msg): msg = json.loads(msg) return cls(**msg) config.py HOST = \"127.0.0.1\" PORT = 14900","title":"\u0417\u0430\u0434\u0430\u0447\u0430_4"},{"location":"lab_1/task_4/#4","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4"},{"location":"lab_1/task_4/#_1","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0432\u0443\u0445\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0438\u043b\u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0414\u043b\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0431\u0430\u043b\u043b\u043e\u0432 \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0439\u0442\u0435 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f: \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b TCP: 100% \u0431\u0430\u043b\u043b\u043e\u0432. \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b UDP: 80% \u0431\u0430\u043b\u043b\u043e\u0432. \u0414\u043b\u044f UDP \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 threading \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0435. \u0414\u043b\u044f TCP \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043e\u0442 \u0432\u0441\u0435\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u043f\u043e\u0442\u043e\u043a\u0430\u0445. \u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_4/#_2","text":"\u0411\u044b\u043b \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0443\u044e threading \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u043e\u043a\u0430 \u043f\u043e\u0434 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u0447\u0430\u0442\u0430, \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0438 2 \u043f\u043e\u0442\u043e\u043a\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043b\u0438 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_4/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_4/#serverpy","text":"import socket import threading from config import HOST, PORT from msg_dataclass import Message clients = [] def send_message(client_socket: socket.socket, msg: Message): global clients msg = str(msg).encode() for client in clients: if client != client_socket: try: client.send(msg) except Exception as e: print(f\"Error {e} while sending message to client, stoping it's connection\") try: client.close() except: pass def process_client(client_socket: socket.socket, addr: tuple): global clients try: print(f\"New user with addr: {addr}\") while True: msg = client_socket.recv(16384).decode() msg = Message.parse_msg(msg) if msg.type == \"quit\": break msg.author = addr[1] send_message(client_socket, msg) except Exception as e: print(f\"error {e} while processing client {addr}\") finally: print(f\"stoping connection and thread for client {addr}\") try: msg = Message(type=\"stop\", author=\"server\") client_socket.send(str(msg).encode()) client_socket.close() except: pass clients.remove(client_socket) conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) try: while True: client_socket, addr = conn.accept() clients.append(client_socket) new_client_thread = threading.Thread(target=process_client, args=(client_socket, addr), daemon=True) new_client_thread.start() except Exception as e: print(f\"Error {e} while server running, trying to send messages of stop, and shutting down\") try: msg = Message(type=\"stop\", author=\"server\") send_message(conn, msg) except: print(\"err\") finally: conn.close()","title":"server.py"},{"location":"lab_1/task_4/#clientpy","text":"import socket import threading from config import HOST, PORT from msg_dataclass import Message def reciever(conn: socket.socket, stop: threading.Event): while not stop.is_set(): try: msg = conn.recv(16384).decode() msg = Message.parse_msg(msg) if msg.type == \"stop\" and msg.author == \"server\": stop.set() print(f\"recieved stop message from server\") break else: print(f\"{msg.author}: {msg.msg}\") except Exception as e: print(f\"error {e} while recieving\") stop.set() def sender(conn: socket.socket, stop: threading.Event): try: while not stop.is_set(): msg = input() if msg == \"exit\": stop.set() print(\"Exit command recieved\") break msg = Message(msg=msg) conn.send(str(msg).encode()) except Exception as e: print(f\"error {e} during sending msg\") stop.set() print('Type messages to send, type \"exit\" to stop client') conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.connect((HOST, PORT)) stop = threading.Event() reciever_thread = threading.Thread(target=reciever, args=(conn, stop), daemon=True) sender_thread = threading.Thread(target=sender, args=(conn, stop), daemon=True) reciever_thread.start() sender_thread.start() try: while not stop.is_set(): stop.wait(timeout=0.5) except Exception as e: print(f\"Error {e} in client\") finally: try: msg = Message(type=\"quit\") conn.send(str(msg).encode()) except: pass print(\"shutting down client\") try: conn.close() except: pass","title":"client.py"},{"location":"lab_1/task_4/#msg_dataclasspy","text":"import json from dataclasses import dataclass, asdict @dataclass class Message: type: str = \"\" msg: str = \"\" author: str = \"self\" def __str__(self): return json.dumps(asdict(self)) @classmethod def parse_msg(cls, msg): msg = json.loads(msg) return cls(**msg)","title":"msg_dataclass.py"},{"location":"lab_1/task_4/#configpy","text":"HOST = \"127.0.0.1\" PORT = 14900","title":"config.py"},{"location":"lab_1/task_5/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 GET \u0438 POST HTTP-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 socket \u0432 Python. \u0417\u0430\u0434\u0430\u043d\u0438\u0435: \u0421\u0435\u0440\u0432\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d: \u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0438 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435 \u0438 \u043e\u0446\u0435\u043d\u043a\u0435 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435. \u041e\u0442\u0434\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e\u0431\u043e \u0432\u0441\u0435\u0445 \u043e\u0446\u0435\u043d\u043a\u0430\u0445 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430\u043c \u0432 \u0432\u0438\u0434\u0435 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0432\u0441\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0431\u0430\u0437\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0421\u043e\u0437\u0434\u0430\u043b \u043e\u0434\u043d\u0443 \u043d\u043e\u0432\u0443\u044e send_error, \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043e\u0448\u0438\u0431\u043a\u043e \u0438\u0437 \u043b\u044e\u0431\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043a\u043e\u0434\u0430. \u0422\u0430\u043a \u0436\u0435 \u0431\u044b\u043b \u043d\u0430\u043f\u0441\u0438\u0430\u043d, test.py, \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 post \u0437\u0430\u043f\u0440\u0441\u043e\u0432 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440. \u0421\u0435\u0440\u0432\u0435\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 post \u0438 get \u0437\u0430\u043f\u0440\u043e\u0441\u044b. \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket from config import HOST, PORT class MyHTTPServer: def __init__(self, host, port, name): self.host = host self.port = port self.name = name self.grades = dict() def serve_forever(self): sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind((self.host, self.port)) sock.listen(10) print(f\"\u0421\u0435\u0440\u0432\u0435\u0440 \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u043d\u0430 http://{self.host}:{self.port}\") try: while True: client_sock, _ = sock.accept() self.serve_client(client_sock) finally: sock.close() def serve_client(self, client_sock): try: client_file = client_sock.makefile('rb') method, url, version, params = self.parse_request(client_file, client_sock) headers = self.parse_headers(client_file) self.handle_request(client_sock, method, params) client_file.close() except Exception as e: print(e) self.send_error(client_sock, \"400 Bad Request\") finally: client_sock.close() def parse_request(self, client_file, client_sock): request_line = client_file.readline().decode().strip() if not request_line: raise ValueError(\"\u041f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\") parts = request_line.split() if len(parts) != 3: raise ValueError(\"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0441\u0442\u0440\u043e\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\") method, url, version = parts params = dict() if '?' in url: try: url, params = url.split(\"?\") tmp = params.split(\"&\") params = dict() for i in tmp: key, value = i.split(\"=\") params[key] = value except Exception as e: print(e) self.send_error(client_sock, \"400 Bad Request\") return method, url, version, params def parse_headers(self, client_file): headers = {} while True: line = client_file.readline().decode().strip() if line == '': break key, value = line.split(':', 1) headers[key.strip()] = value.strip() return headers def handle_request(self, client_sock, method, params): if method == 'GET': html = \"<html><head><meta charset='utf-8'><title>\u041e\u0446\u0435\u043d\u043a\u0438</title></head><body>\" html += \"<h1>\u041e\u0446\u0435\u043d\u043a\u0438 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430\u043c</h1>\" if self.grades: html += \"<ul>\" for disc, grade in self.grades.items(): html += f\"<li>{disc}: {\", \".join(grade)}</li>\" html += \"</ul>\" else: html += \"<p>\u041d\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u043e\u0446\u0435\u043d\u043e\u043a.</p>\" self.send_response(client_sock, \"200 OK\", \"text/html; charset=utf-8\", html) elif method == 'POST': for key in params: if key in self.grades: self.grades[key].append(params[key]) else: self.grades[key] = [params[key]] self.send_response(client_sock, \"200 OK\", \"text/plain; charset=utf-8\", \"OK\") else: self.send_error(client_sock, \"404 Not Found\") def send_error(self, client_sock, status): self.send_response(client_sock, status, \"text/html; charset=utf-8\", f\"<h1>{status}</h1>\") def send_response(self, client_sock, status, content_type, body): response = f\"HTTP/1.1 {status}\\r\\n\" response += f\"Server: {self.name}\\r\\n\" response += f\"Connection: close\\r\\n\" response += f\"Content-Type: {content_type}\\r\\n\" response += f\"Content-Length: {len(body.encode())}\\r\\n\" response += \"\\r\\n\" response += body client_sock.send(response.encode()) if __name__ == '__main__': host = HOST port = PORT name = \"Grades\" serv = MyHTTPServer(host, port, name) try: serv.serve_forever() except KeyboardInterrupt: pass","title":"\u0417\u0430\u0434\u0430\u0447\u0430_5"},{"location":"lab_1/task_5/#5","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5"},{"location":"lab_1/task_5/#_1","text":"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 GET \u0438 POST HTTP-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 socket \u0432 Python. \u0417\u0430\u0434\u0430\u043d\u0438\u0435: \u0421\u0435\u0440\u0432\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d: \u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0438 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435 \u0438 \u043e\u0446\u0435\u043d\u043a\u0435 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435. \u041e\u0442\u0434\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e\u0431\u043e \u0432\u0441\u0435\u0445 \u043e\u0446\u0435\u043d\u043a\u0430\u0445 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430\u043c \u0432 \u0432\u0438\u0434\u0435 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_5/#_2","text":"\u0411\u044b\u043b\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0432\u0441\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0431\u0430\u0437\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0421\u043e\u0437\u0434\u0430\u043b \u043e\u0434\u043d\u0443 \u043d\u043e\u0432\u0443\u044e send_error, \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043e\u0448\u0438\u0431\u043a\u043e \u0438\u0437 \u043b\u044e\u0431\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043a\u043e\u0434\u0430. \u0422\u0430\u043a \u0436\u0435 \u0431\u044b\u043b \u043d\u0430\u043f\u0441\u0438\u0430\u043d, test.py, \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 post \u0437\u0430\u043f\u0440\u0441\u043e\u0432 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440. \u0421\u0435\u0440\u0432\u0435\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 post \u0438 get \u0437\u0430\u043f\u0440\u043e\u0441\u044b.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_5/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_5/#serverpy","text":"import socket from config import HOST, PORT class MyHTTPServer: def __init__(self, host, port, name): self.host = host self.port = port self.name = name self.grades = dict() def serve_forever(self): sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind((self.host, self.port)) sock.listen(10) print(f\"\u0421\u0435\u0440\u0432\u0435\u0440 \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u043d\u0430 http://{self.host}:{self.port}\") try: while True: client_sock, _ = sock.accept() self.serve_client(client_sock) finally: sock.close() def serve_client(self, client_sock): try: client_file = client_sock.makefile('rb') method, url, version, params = self.parse_request(client_file, client_sock) headers = self.parse_headers(client_file) self.handle_request(client_sock, method, params) client_file.close() except Exception as e: print(e) self.send_error(client_sock, \"400 Bad Request\") finally: client_sock.close() def parse_request(self, client_file, client_sock): request_line = client_file.readline().decode().strip() if not request_line: raise ValueError(\"\u041f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\") parts = request_line.split() if len(parts) != 3: raise ValueError(\"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0441\u0442\u0440\u043e\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\") method, url, version = parts params = dict() if '?' in url: try: url, params = url.split(\"?\") tmp = params.split(\"&\") params = dict() for i in tmp: key, value = i.split(\"=\") params[key] = value except Exception as e: print(e) self.send_error(client_sock, \"400 Bad Request\") return method, url, version, params def parse_headers(self, client_file): headers = {} while True: line = client_file.readline().decode().strip() if line == '': break key, value = line.split(':', 1) headers[key.strip()] = value.strip() return headers def handle_request(self, client_sock, method, params): if method == 'GET': html = \"<html><head><meta charset='utf-8'><title>\u041e\u0446\u0435\u043d\u043a\u0438</title></head><body>\" html += \"<h1>\u041e\u0446\u0435\u043d\u043a\u0438 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430\u043c</h1>\" if self.grades: html += \"<ul>\" for disc, grade in self.grades.items(): html += f\"<li>{disc}: {\", \".join(grade)}</li>\" html += \"</ul>\" else: html += \"<p>\u041d\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u043e\u0446\u0435\u043d\u043e\u043a.</p>\" self.send_response(client_sock, \"200 OK\", \"text/html; charset=utf-8\", html) elif method == 'POST': for key in params: if key in self.grades: self.grades[key].append(params[key]) else: self.grades[key] = [params[key]] self.send_response(client_sock, \"200 OK\", \"text/plain; charset=utf-8\", \"OK\") else: self.send_error(client_sock, \"404 Not Found\") def send_error(self, client_sock, status): self.send_response(client_sock, status, \"text/html; charset=utf-8\", f\"<h1>{status}</h1>\") def send_response(self, client_sock, status, content_type, body): response = f\"HTTP/1.1 {status}\\r\\n\" response += f\"Server: {self.name}\\r\\n\" response += f\"Connection: close\\r\\n\" response += f\"Content-Type: {content_type}\\r\\n\" response += f\"Content-Length: {len(body.encode())}\\r\\n\" response += \"\\r\\n\" response += body client_sock.send(response.encode()) if __name__ == '__main__': host = HOST port = PORT name = \"Grades\" serv = MyHTTPServer(host, port, name) try: serv.serve_forever() except KeyboardInterrupt: pass","title":"server.py"},{"location":"lab_2/task_1/","text":"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e \u0432\u0435\u0431 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 django \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0443\u0440\u0430\u043c\u0438 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0443\u0440\u0430\u0433\u0435\u043d\u0441\u0442\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u0445 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \u0438 \u043e\u0442\u0437\u044b\u0432\u0430\u043c\u0438 \u043e \u0442\u0443\u0440\u0430\u0445. \u0411\u044b\u043b\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c bootstrap, \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u044f \u0438 \u043f\u043e\u0438\u0441\u043a \u0442\u0443\u0440\u043e\u0432 \u043f\u043e \u0441\u0442\u0440\u0430\u043d\u0430\u043c, \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f\u043c \u0438 \u0442\u0443\u0440 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0443. \u0422\u0430\u043a \u0436\u0435 \u0432\u0441\u0451 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u0440\u0430\u043d\u043e \u0432 docker \u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043e\u043c docker-compose \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b. \u0417\u0430\u043f\u0443\u0441\u043a \u0414\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043d\u0443\u0436\u043d\u043e: \u0421\u043e\u0431\u0440\u0430\u0442\u044c docker image: docker build -t tour-site:latest . \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c compose: docker compose up -d \u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0443\u0440\u043e\u0432 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u041e\u0442\u0437\u044b\u0432\u044b \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0437\u044b\u0432\u0430 \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0412\u0445\u043e\u0434 \u0410\u0434\u043c\u0438\u043d\u0441\u043a\u0430\u044f \u043f\u0430\u043d\u0435\u043b\u044c \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u041c\u043e\u0434\u0435\u043b\u0438 from django.db import models from django.db import models from django.contrib.auth.models import User class Tour(models.Model): name = models.CharField(max_length=200, verbose_name=\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430\") agency = models.CharField(max_length=200, verbose_name=\"\u0422\u0443\u0440\u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e\") description = models.TextField(verbose_name=\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\") payment_terms = models.TextField(verbose_name=\"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043e\u043f\u043b\u0430\u0442\u044b\") country = models.CharField(max_length=100, verbose_name=\"\u0421\u0442\u0440\u0430\u043d\u0430\") def __str__(self): return self.name class Reservation(models.Model): user = models.ForeignKey(User, on_delete=models.CASCADE) tour = models.ForeignKey(Tour, on_delete=models.CASCADE) reservation_date = models.DateTimeField(auto_now_add=True) reservation_approve = models.BooleanField(default=False, verbose_name=\"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\") n_people = models.IntegerField(default=1, verbose_name=\"\u041a\u043e\u043b-\u0432\u043e \u043b\u044e\u0434\u0435\u0439 \u0432 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438\") start_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430\") end_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f\") def __str__(self): return f\"{self.user.username} - {self.tour.name}\" class Review(models.Model): tour = models.ForeignKey(Tour, on_delete=models.CASCADE) user = models.ForeignKey(User, on_delete=models.CASCADE) comment = models.TextField(verbose_name=\"\u0422\u0435\u043a\u0441\u0442 \u043e\u0442\u0437\u044b\u0432\u0430\") rating = models.IntegerField(choices=[(i, i) for i in range(1, 11)], verbose_name=\"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (1-10)\") created_at = models.DateTimeField(auto_now_add=True) def __str__(self): return f\"\u041e\u0442\u0437\u044b\u0432 \u043e\u0442 {self.user.username} \u043d\u0430 {self.tour.name}\" \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f from django.shortcuts import render, redirect, get_object_or_404 from django.contrib.auth.decorators import login_required from django.contrib import messages from django.views.generic import ListView from django.db.models import Q, Count, Avg from .models import Tour, Reservation, Review from .forms import UserRegisterForm, ReviewForm, ReserveForm TEMPLATES_DIR = 'tours/' def register(request): if request.method == 'POST': form = UserRegisterForm(request.POST) if form.is_valid(): form.save() username = form.cleaned_data.get('username') messages.success(request, f'\u0410\u043a\u043a\u0430\u0443\u043d\u0442 {username} \u0441\u043e\u0437\u0434\u0430\u043d') return redirect('login') else: form = UserRegisterForm() return render(request, f'{TEMPLATES_DIR}register.html', {'form': form}) class TourListView(ListView): model = Tour template_name = 'tours/tour_list.html' context_object_name = 'tours' paginate_by = 6 def get_queryset(self): queryset = Tour.objects.all().annotate( average_rating=Avg('review__rating') ) search_query = self.request.GET.get('search', '') if search_query: queryset = queryset.filter( Q(name__icontains=search_query) | Q(country__icontains=search_query) | Q(agency__icontains=search_query) ) return queryset.order_by('name') def get_context_data(self, **kwargs): context = super().get_context_data(**kwargs) context['search_query'] = self.request.GET.get('search', '') return context @login_required def reserve_tour(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) if request.method == 'POST': form = ReserveForm(request.POST) if form.is_valid(): reserve = form.save(commit=False) reserve.tour = tour reserve.user = request.user reserve.save() messages.success(request, '\u0422\u0443\u0440 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d') return redirect('my_reservations') else: form = ReserveForm() return render(request, f'{TEMPLATES_DIR}reserve_confirm.html', {'tour': tour, 'form': form}) @login_required def change_tour(request, tour_id, reservation_id): tour = get_object_or_404(Tour, id=tour_id) reservation = get_object_or_404(Reservation, id=reservation_id) if request.method == 'POST': form = ReserveForm(request.POST, instance=reservation) if form.is_valid(): reservation = form.save(commit=False) reservation.reservation_approve = False reservation.save() messages.success(request, '\u0422\u0443\u0440 \u0418\u0437\u043c\u0435\u043d\u0435\u043d') return redirect('my_reservations') else: form = ReserveForm(instance=reservation) return render(request, f'{TEMPLATES_DIR}reserve_confirm.html', {'tour': tour, 'form': form}) @login_required def my_reservations(request): reservations = Reservation.objects.filter(user=request.user) return render(request, f'{TEMPLATES_DIR}my_reservations.html', {'reservations': reservations}) @login_required def delete_reservation(request, reservation_id): reservation = get_object_or_404(Reservation, id=reservation_id, user=request.user) reservation.delete() messages.success(request, '\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e.') return redirect('my_reservations') @login_required def add_review(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) if request.method == 'POST': form = ReviewForm(request.POST) if form.is_valid(): review = form.save(commit=False) review.tour = tour review.user = request.user review.save() messages.success(request, '\u041e\u0442\u0437\u044b\u0432 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d') return redirect('tour_list') else: form = ReviewForm() return render(request, f'{TEMPLATES_DIR}add_review.html', {'tour': tour, 'form': form}) def sold_tours_by_country(request): data = Tour.objects.filter(reservation__isnull=False).values('country').annotate(count=Count('id')).order_by('-count') total_count = sum(item['count'] for item in data) return render(request, f'{TEMPLATES_DIR}sold_tours.html', {'data': data, 'total_count': total_count}) def tour_reviews(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) reviews = Review.objects.filter(tour=tour).order_by('-created_at') if reviews.exists(): from django.db.models import Avg avg_rating = reviews.aggregate(Avg('rating'))['rating__avg'] tour.average_rating = avg_rating else: tour.average_rating = None return render(request, 'tours/tour_reviews.html', {'tour': tour, 'reviews': reviews}) \u0424\u043e\u0440\u043c\u044b from django import forms from django.contrib.auth.models import User from django.contrib.auth.forms import UserCreationForm from .models import Review, Reservation class UserRegisterForm(UserCreationForm): email = forms.EmailField() class Meta: model = User fields = ['username', 'email', 'password1', 'password2'] class ReviewForm(forms.ModelForm): class Meta: model = Review fields = ['rating', 'comment'] widgets = { 'rating': forms.Select(attrs={'class': 'form-select'}), 'comment': forms.Textarea(attrs={ 'class': 'form-control', 'rows': 6, 'placeholder': '\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0432\u043e\u0438\u0445 \u0432\u043f\u0435\u0447\u0430\u0442\u043b\u0435\u043d\u0438\u044f\u0445 \u043e\u0442 \u0442\u0443\u0440\u0430...' }) } labels = { 'rating': '\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (1-10)', 'comment': '\u0412\u0430\u0448 \u043e\u0442\u0437\u044b\u0432' } class ReserveForm(forms.ModelForm): class Meta: model = Reservation fields = ['n_people', 'start_date', 'end_date'] widgets = { 'n_people': forms.NumberInput(attrs={ 'class': 'form-control', 'min': 1, 'placeholder': '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a' }), 'start_date': forms.DateInput(attrs={ 'type': 'date', 'class': 'form-control' }), 'end_date': forms.DateInput(attrs={ 'type': 'date', 'class': 'form-control' }) } labels = { 'n_people': '\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439', 'start_date': '\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430', 'end_date': '\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f' } def clean(self): cleaned_data = super().clean() start_date = cleaned_data.get('start_date') end_date = cleaned_data.get('end_date') n_people = cleaned_data.get('n_people') if start_date and end_date: if start_date >= end_date: raise forms.ValidationError('\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u043e\u0437\u0436\u0435 \u0434\u0430\u0442\u044b \u043d\u0430\u0447\u0430\u043b\u0430') if n_people and n_people < 1: raise forms.ValidationError('\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 1') return cleaned_data","title":"\u0417\u0430\u0434\u0430\u0447\u0430_1"},{"location":"lab_2/task_1/#_1","text":"\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e \u0432\u0435\u0431 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 django \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0443\u0440\u0430\u043c\u0438 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0443\u0440\u0430\u0433\u0435\u043d\u0441\u0442\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u0445 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \u0438 \u043e\u0442\u0437\u044b\u0432\u0430\u043c\u0438 \u043e \u0442\u0443\u0440\u0430\u0445. \u0411\u044b\u043b\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c bootstrap, \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u044f \u0438 \u043f\u043e\u0438\u0441\u043a \u0442\u0443\u0440\u043e\u0432 \u043f\u043e \u0441\u0442\u0440\u0430\u043d\u0430\u043c, \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f\u043c \u0438 \u0442\u0443\u0440 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0443. \u0422\u0430\u043a \u0436\u0435 \u0432\u0441\u0451 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u0440\u0430\u043d\u043e \u0432 docker \u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043e\u043c docker-compose \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b.","title":"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435"},{"location":"lab_2/task_1/#_2","text":"\u0414\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043d\u0443\u0436\u043d\u043e: \u0421\u043e\u0431\u0440\u0430\u0442\u044c docker image: docker build -t tour-site:latest . \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c compose: docker compose up -d","title":"\u0417\u0430\u043f\u0443\u0441\u043a"},{"location":"lab_2/task_1/#_3","text":"","title":"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b"},{"location":"lab_2/task_1/#_4","text":"","title":"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0443\u0440\u043e\u0432"},{"location":"lab_2/task_1/#_5","text":"","title":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"},{"location":"lab_2/task_1/#_6","text":"","title":"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"},{"location":"lab_2/task_1/#_7","text":"","title":"\u041e\u0442\u0437\u044b\u0432\u044b"},{"location":"lab_2/task_1/#_8","text":"","title":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0437\u044b\u0432\u0430"},{"location":"lab_2/task_1/#_9","text":"","title":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},{"location":"lab_2/task_1/#_10","text":"","title":"\u0412\u0445\u043e\u0434"},{"location":"lab_2/task_1/#_11","text":"","title":"\u0410\u0434\u043c\u0438\u043d\u0441\u043a\u0430\u044f \u043f\u0430\u043d\u0435\u043b\u044c"},{"location":"lab_2/task_1/#_12","text":"","title":"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f"},{"location":"lab_2/task_1/#_13","text":"from django.db import models from django.db import models from django.contrib.auth.models import User class Tour(models.Model): name = models.CharField(max_length=200, verbose_name=\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430\") agency = models.CharField(max_length=200, verbose_name=\"\u0422\u0443\u0440\u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e\") description = models.TextField(verbose_name=\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\") payment_terms = models.TextField(verbose_name=\"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043e\u043f\u043b\u0430\u0442\u044b\") country = models.CharField(max_length=100, verbose_name=\"\u0421\u0442\u0440\u0430\u043d\u0430\") def __str__(self): return self.name class Reservation(models.Model): user = models.ForeignKey(User, on_delete=models.CASCADE) tour = models.ForeignKey(Tour, on_delete=models.CASCADE) reservation_date = models.DateTimeField(auto_now_add=True) reservation_approve = models.BooleanField(default=False, verbose_name=\"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\") n_people = models.IntegerField(default=1, verbose_name=\"\u041a\u043e\u043b-\u0432\u043e \u043b\u044e\u0434\u0435\u0439 \u0432 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438\") start_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430\") end_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f\") def __str__(self): return f\"{self.user.username} - {self.tour.name}\" class Review(models.Model): tour = models.ForeignKey(Tour, on_delete=models.CASCADE) user = models.ForeignKey(User, on_delete=models.CASCADE) comment = models.TextField(verbose_name=\"\u0422\u0435\u043a\u0441\u0442 \u043e\u0442\u0437\u044b\u0432\u0430\") rating = models.IntegerField(choices=[(i, i) for i in range(1, 11)], verbose_name=\"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (1-10)\") created_at = models.DateTimeField(auto_now_add=True) def __str__(self): return f\"\u041e\u0442\u0437\u044b\u0432 \u043e\u0442 {self.user.username} \u043d\u0430 {self.tour.name}\"","title":"\u041c\u043e\u0434\u0435\u043b\u0438"},{"location":"lab_2/task_1/#_14","text":"from django.shortcuts import render, redirect, get_object_or_404 from django.contrib.auth.decorators import login_required from django.contrib import messages from django.views.generic import ListView from django.db.models import Q, Count, Avg from .models import Tour, Reservation, Review from .forms import UserRegisterForm, ReviewForm, ReserveForm TEMPLATES_DIR = 'tours/' def register(request): if request.method == 'POST': form = UserRegisterForm(request.POST) if form.is_valid(): form.save() username = form.cleaned_data.get('username') messages.success(request, f'\u0410\u043a\u043a\u0430\u0443\u043d\u0442 {username} \u0441\u043e\u0437\u0434\u0430\u043d') return redirect('login') else: form = UserRegisterForm() return render(request, f'{TEMPLATES_DIR}register.html', {'form': form}) class TourListView(ListView): model = Tour template_name = 'tours/tour_list.html' context_object_name = 'tours' paginate_by = 6 def get_queryset(self): queryset = Tour.objects.all().annotate( average_rating=Avg('review__rating') ) search_query = self.request.GET.get('search', '') if search_query: queryset = queryset.filter( Q(name__icontains=search_query) | Q(country__icontains=search_query) | Q(agency__icontains=search_query) ) return queryset.order_by('name') def get_context_data(self, **kwargs): context = super().get_context_data(**kwargs) context['search_query'] = self.request.GET.get('search', '') return context @login_required def reserve_tour(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) if request.method == 'POST': form = ReserveForm(request.POST) if form.is_valid(): reserve = form.save(commit=False) reserve.tour = tour reserve.user = request.user reserve.save() messages.success(request, '\u0422\u0443\u0440 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d') return redirect('my_reservations') else: form = ReserveForm() return render(request, f'{TEMPLATES_DIR}reserve_confirm.html', {'tour': tour, 'form': form}) @login_required def change_tour(request, tour_id, reservation_id): tour = get_object_or_404(Tour, id=tour_id) reservation = get_object_or_404(Reservation, id=reservation_id) if request.method == 'POST': form = ReserveForm(request.POST, instance=reservation) if form.is_valid(): reservation = form.save(commit=False) reservation.reservation_approve = False reservation.save() messages.success(request, '\u0422\u0443\u0440 \u0418\u0437\u043c\u0435\u043d\u0435\u043d') return redirect('my_reservations') else: form = ReserveForm(instance=reservation) return render(request, f'{TEMPLATES_DIR}reserve_confirm.html', {'tour': tour, 'form': form}) @login_required def my_reservations(request): reservations = Reservation.objects.filter(user=request.user) return render(request, f'{TEMPLATES_DIR}my_reservations.html', {'reservations': reservations}) @login_required def delete_reservation(request, reservation_id): reservation = get_object_or_404(Reservation, id=reservation_id, user=request.user) reservation.delete() messages.success(request, '\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e.') return redirect('my_reservations') @login_required def add_review(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) if request.method == 'POST': form = ReviewForm(request.POST) if form.is_valid(): review = form.save(commit=False) review.tour = tour review.user = request.user review.save() messages.success(request, '\u041e\u0442\u0437\u044b\u0432 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d') return redirect('tour_list') else: form = ReviewForm() return render(request, f'{TEMPLATES_DIR}add_review.html', {'tour': tour, 'form': form}) def sold_tours_by_country(request): data = Tour.objects.filter(reservation__isnull=False).values('country').annotate(count=Count('id')).order_by('-count') total_count = sum(item['count'] for item in data) return render(request, f'{TEMPLATES_DIR}sold_tours.html', {'data': data, 'total_count': total_count}) def tour_reviews(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) reviews = Review.objects.filter(tour=tour).order_by('-created_at') if reviews.exists(): from django.db.models import Avg avg_rating = reviews.aggregate(Avg('rating'))['rating__avg'] tour.average_rating = avg_rating else: tour.average_rating = None return render(request, 'tours/tour_reviews.html', {'tour': tour, 'reviews': reviews})","title":"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f"},{"location":"lab_2/task_1/#_15","text":"from django import forms from django.contrib.auth.models import User from django.contrib.auth.forms import UserCreationForm from .models import Review, Reservation class UserRegisterForm(UserCreationForm): email = forms.EmailField() class Meta: model = User fields = ['username', 'email', 'password1', 'password2'] class ReviewForm(forms.ModelForm): class Meta: model = Review fields = ['rating', 'comment'] widgets = { 'rating': forms.Select(attrs={'class': 'form-select'}), 'comment': forms.Textarea(attrs={ 'class': 'form-control', 'rows': 6, 'placeholder': '\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0432\u043e\u0438\u0445 \u0432\u043f\u0435\u0447\u0430\u0442\u043b\u0435\u043d\u0438\u044f\u0445 \u043e\u0442 \u0442\u0443\u0440\u0430...' }) } labels = { 'rating': '\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (1-10)', 'comment': '\u0412\u0430\u0448 \u043e\u0442\u0437\u044b\u0432' } class ReserveForm(forms.ModelForm): class Meta: model = Reservation fields = ['n_people', 'start_date', 'end_date'] widgets = { 'n_people': forms.NumberInput(attrs={ 'class': 'form-control', 'min': 1, 'placeholder': '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a' }), 'start_date': forms.DateInput(attrs={ 'type': 'date', 'class': 'form-control' }), 'end_date': forms.DateInput(attrs={ 'type': 'date', 'class': 'form-control' }) } labels = { 'n_people': '\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439', 'start_date': '\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430', 'end_date': '\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f' } def clean(self): cleaned_data = super().clean() start_date = cleaned_data.get('start_date') end_date = cleaned_data.get('end_date') n_people = cleaned_data.get('n_people') if start_date and end_date: if start_date >= end_date: raise forms.ValidationError('\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u043e\u0437\u0436\u0435 \u0434\u0430\u0442\u044b \u043d\u0430\u0447\u0430\u043b\u0430') if n_people and n_people < 1: raise forms.ValidationError('\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 1') return cleaned_data","title":"\u0424\u043e\u0440\u043c\u044b"}]}