{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u0421\u0442\u0443\u0434\u0435\u043d\u0442: \u0422\u0443\u0440\u0438\u0449\u0435\u0432 \u0410\u0440\u0442\u0451\u043c \u0413\u0440\u0443\u043f\u043f\u0430: K3340","title":"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},{"location":"lab_1/conclusion/","text":"\u0412 \u0445\u043e\u0434\u0435 \u044d\u0442\u043e\u0439 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b, \u044f \u043d\u0430\u0443\u0447\u0438\u043b\u0441\u044f \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u0441\u043e\u043a\u0435\u0442\u0430\u043c\u0438 \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 socket \u043d\u0430 python, \u0441\u043e\u0437\u0434\u0430\u043b \u043f\u0440\u043e\u0441\u0442\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u044b\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0434\u043e \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0447\u0430\u0442\u0430 \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 http \u0437\u0430\u043f\u0440\u0441\u043e\u043e\u0432.","title":"\u0412\u044b\u0432\u043e\u0434"},{"location":"lab_1/task_1/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, server\u00bb, \u0438 \u043e\u043d\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0412 \u043e\u0442\u0432\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, client\u00bb, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043b \u043f\u0440\u043e\u0441\u0442\u043e\u0435 \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c UDP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0431\u043c\u0435\u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) conn.bind((HOST, PORT)) data, addr = conn.recvfrom(1024) msg = data.decode('utf-8') print(f\"recieved message: {msg}\") if msg == \"Hello, server\": ans_message = \"Hello, client\" conn.sendto(ans_message.encode(), addr) else: print(\"Unknow message recieved\") conn.close() client.py import socket from config import HOST, PORT msg = \"Hello, server\" conn = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) conn.connect((HOST, PORT)) conn.send(msg.encode()) response = conn.recv(1024) print(f\"response: {response.decode(\"utf-8\")}\") config.py HOST = \"127.0.0.1\" PORT = 14900","title":"\u0417\u0430\u0434\u0430\u0447\u0430_1"},{"location":"lab_1/task_1/#1","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1"},{"location":"lab_1/task_1/#_1","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, server\u00bb, \u0438 \u043e\u043d\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0412 \u043e\u0442\u0432\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u00abHello, client\u00bb, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c\u0441\u044f \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_1/#_2","text":"\u0411\u044b\u043b\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043b \u043f\u0440\u043e\u0441\u0442\u043e\u0435 \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c UDP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0431\u043c\u0435\u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_1/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_1/#serverpy","text":"import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) conn.bind((HOST, PORT)) data, addr = conn.recvfrom(1024) msg = data.decode('utf-8') print(f\"recieved message: {msg}\") if msg == \"Hello, server\": ans_message = \"Hello, client\" conn.sendto(ans_message.encode(), addr) else: print(\"Unknow message recieved\") conn.close()","title":"server.py"},{"location":"lab_1/task_1/#clientpy","text":"import socket from config import HOST, PORT msg = \"Hello, server\" conn = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) conn.connect((HOST, PORT)) conn.send(msg.encode()) response = conn.recv(1024) print(f\"response: {response.decode(\"utf-8\")}\")","title":"client.py"},{"location":"lab_1/task_1/#configpy","text":"HOST = \"127.0.0.1\" PORT = 14900","title":"config.py"},{"location":"lab_1/task_2/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 4: \u041f\u043e\u0438\u0441\u043a \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438, \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0432\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u0441 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b. \u0421\u0435\u0440\u0432\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043f\u043e \u0434\u0432\u0443\u043c \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c \u0438 \u0443\u0433\u043b\u0443 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket from math import sin, radians from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) while True: try: client_socket, addr = conn.accept() print(type(addr), addr) data = client_socket.recv(16384).decode() print(\"\u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0437\u0430\u043f\u0440\u043e\u0441:\", data) a, b, angle = map(float, data.split(\", \")) angle = radians(angle) s = round(a * b * sin(angle), 2) client_socket.send(str(s).encode()) client_socket.close() except KeyboardInterrupt: conn.close() break client.py import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.connect((HOST, PORT)) a = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443(\u043d\u0435\u0446\u0443\u043b\u044b\u0435 \u0447\u0438\u0441\u043b\u0430 \u0447\u0435\u0440\u0435\u0437 \u0442\u043e\u0447\u043a\u0443 \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 1.5)): \") b = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0442\u043e\u0440\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443: \") angle = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0443\u0433\u043e\u043b \u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445: \") msg = \", \".join([a, b, angle]) conn.send(msg.encode()) response = conn.recv(16384).decode() conn.close() print(f\"\u041f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0430\u044f\u0441\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u044c: {response}\") config.py HOST = \"127.0.0.1\" PORT = 14900","title":"\u0417\u0430\u0434\u0430\u0447\u0430_2"},{"location":"lab_1/task_2/#2","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2"},{"location":"lab_1/task_2/#_1","text":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4: \u041f\u043e\u0438\u0441\u043a \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0443\u044e \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438, \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0432\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u0441 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b. \u0421\u0435\u0440\u0432\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_2/#_2","text":"\u0411\u044b\u043b\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u043a\u043b\u0438\u0435\u043d\u0442-\u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043f\u043e \u0434\u0432\u0443\u043c \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c \u0438 \u0443\u0433\u043b\u0443 \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_2/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_2/#serverpy","text":"import socket from math import sin, radians from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) while True: try: client_socket, addr = conn.accept() print(type(addr), addr) data = client_socket.recv(16384).decode() print(\"\u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0437\u0430\u043f\u0440\u043e\u0441:\", data) a, b, angle = map(float, data.split(\", \")) angle = radians(angle) s = round(a * b * sin(angle), 2) client_socket.send(str(s).encode()) client_socket.close() except KeyboardInterrupt: conn.close() break","title":"server.py"},{"location":"lab_1/task_2/#clientpy","text":"import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.connect((HOST, PORT)) a = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443(\u043d\u0435\u0446\u0443\u043b\u044b\u0435 \u0447\u0438\u0441\u043b\u0430 \u0447\u0435\u0440\u0435\u0437 \u0442\u043e\u0447\u043a\u0443 \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 1.5)): \") b = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0442\u043e\u0440\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443: \") angle = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0443\u0433\u043e\u043b \u0432 \u0433\u0440\u0430\u0434\u0443\u0441\u0430\u0445: \") msg = \", \".join([a, b, angle]) conn.send(msg.encode()) response = conn.recv(16384).decode() conn.close() print(f\"\u041f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0430\u044f\u0441\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u044c: {response}\")","title":"client.py"},{"location":"lab_1/task_2/#configpy","text":"HOST = \"127.0.0.1\" PORT = 14900","title":"config.py"},{"location":"lab_1/task_3/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443, \u0438 \u0432 \u043e\u0442\u0432\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 HTTP-\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0435 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 index.html. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u043f\u0440\u043e\u0441\u0442\u043e\u0439 HTTP-\u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u0434\u0430\u0447\u0438 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) while True: try: client_socket, addr = conn.accept() data = client_socket.recv(16384).decode() print(\"\u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0437\u0430\u043f\u0440\u043e\u0441:\", data) response_type = \"HTTP/1.1 200 OK\\r\\n\" headers = \"Content-Type: text/html; charset=utf-8\\r\\n\\r\\n\" with open(\"index.html\", encoding=\"utf-8\") as file: body = file.read() msg = response_type + headers + body client_socket.send(msg.encode()) client_socket.close() except KeyboardInterrupt: conn.close() break config.py HOST = \"127.0.0.1\" PORT = 14900","title":"\u0417\u0430\u0434\u0430\u0447\u0430_3"},{"location":"lab_1/task_3/#3","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3"},{"location":"lab_1/task_3/#_1","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043b\u0438\u0435\u043d\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443, \u0438 \u0432 \u043e\u0442\u0432\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 HTTP-\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0435 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 index.html.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_3/#_2","text":"\u0411\u044b\u043b \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u043f\u0440\u043e\u0441\u0442\u043e\u0439 HTTP-\u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u0434\u0430\u0447\u0438 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_3/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_3/#serverpy","text":"import socket from config import HOST, PORT conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) while True: try: client_socket, addr = conn.accept() data = client_socket.recv(16384).decode() print(\"\u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0437\u0430\u043f\u0440\u043e\u0441:\", data) response_type = \"HTTP/1.1 200 OK\\r\\n\" headers = \"Content-Type: text/html; charset=utf-8\\r\\n\\r\\n\" with open(\"index.html\", encoding=\"utf-8\") as file: body = file.read() msg = response_type + headers + body client_socket.send(msg.encode()) client_socket.close() except KeyboardInterrupt: conn.close() break","title":"server.py"},{"location":"lab_1/task_3/#configpy","text":"HOST = \"127.0.0.1\" PORT = 14900","title":"config.py"},{"location":"lab_1/task_4/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0432\u0443\u0445\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0438\u043b\u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0414\u043b\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0431\u0430\u043b\u043b\u043e\u0432 \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0439\u0442\u0435 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f: \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b TCP: 100% \u0431\u0430\u043b\u043b\u043e\u0432. \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b UDP: 80% \u0431\u0430\u043b\u043b\u043e\u0432. \u0414\u043b\u044f UDP \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 threading \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0435. \u0414\u043b\u044f TCP \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043e\u0442 \u0432\u0441\u0435\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u043f\u043e\u0442\u043e\u043a\u0430\u0445. \u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0443\u044e threading \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u043e\u043a\u0430 \u043f\u043e\u0434 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u0447\u0430\u0442\u0430, \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0438 2 \u043f\u043e\u0442\u043e\u043a\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043b\u0438 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket import threading from config import HOST, PORT from msg_dataclass import Message clients = [] def send_message(client_socket: socket.socket, msg: Message): global clients msg = str(msg).encode() for client in clients: if client != client_socket: try: client.send(msg) except Exception as e: print(f\"Error {e} while sending message to client, stoping it's connection\") try: client.close() except: pass def process_client(client_socket: socket.socket, addr: tuple): global clients try: print(f\"New user with addr: {addr}\") while True: msg = client_socket.recv(16384).decode() msg = Message.parse_msg(msg) if msg.type == \"quit\": break msg.author = addr[1] send_message(client_socket, msg) except Exception as e: print(f\"error {e} while processing client {addr}\") finally: print(f\"stoping connection and thread for client {addr}\") try: msg = Message(type=\"stop\", author=\"server\") client_socket.send(str(msg).encode()) client_socket.close() except: pass clients.remove(client_socket) conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) try: while True: client_socket, addr = conn.accept() clients.append(client_socket) new_client_thread = threading.Thread(target=process_client, args=(client_socket, addr), daemon=True) new_client_thread.start() except Exception as e: print(f\"Error {e} while server running, trying to send messages of stop, and shutting down\") try: msg = Message(type=\"stop\", author=\"server\") send_message(conn, msg) except: print(\"err\") finally: conn.close() client.py import socket import threading from config import HOST, PORT from msg_dataclass import Message def reciever(conn: socket.socket, stop: threading.Event): while not stop.is_set(): try: msg = conn.recv(16384).decode() msg = Message.parse_msg(msg) if msg.type == \"stop\" and msg.author == \"server\": stop.set() print(f\"recieved stop message from server\") break else: print(f\"{msg.author}: {msg.msg}\") except Exception as e: print(f\"error {e} while recieving\") stop.set() def sender(conn: socket.socket, stop: threading.Event): try: while not stop.is_set(): msg = input() if msg == \"exit\": stop.set() print(\"Exit command recieved\") break msg = Message(msg=msg) conn.send(str(msg).encode()) except Exception as e: print(f\"error {e} during sending msg\") stop.set() print('Type messages to send, type \"exit\" to stop client') conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.connect((HOST, PORT)) stop = threading.Event() reciever_thread = threading.Thread(target=reciever, args=(conn, stop), daemon=True) sender_thread = threading.Thread(target=sender, args=(conn, stop), daemon=True) reciever_thread.start() sender_thread.start() try: while not stop.is_set(): stop.wait(timeout=0.5) except Exception as e: print(f\"Error {e} in client\") finally: try: msg = Message(type=\"quit\") conn.send(str(msg).encode()) except: pass print(\"shutting down client\") try: conn.close() except: pass msg_dataclass.py import json from dataclasses import dataclass, asdict @dataclass class Message: type: str = \"\" msg: str = \"\" author: str = \"self\" def __str__(self): return json.dumps(asdict(self)) @classmethod def parse_msg(cls, msg): msg = json.loads(msg) return cls(**msg) config.py HOST = \"127.0.0.1\" PORT = 14900","title":"\u0417\u0430\u0434\u0430\u0447\u0430_4"},{"location":"lab_1/task_4/#4","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4"},{"location":"lab_1/task_4/#_1","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0432\u0443\u0445\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0438\u043b\u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0414\u043b\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0431\u0430\u043b\u043b\u043e\u0432 \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0439\u0442\u0435 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f: \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b TCP: 100% \u0431\u0430\u043b\u043b\u043e\u0432. \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b UDP: 80% \u0431\u0430\u043b\u043b\u043e\u0432. \u0414\u043b\u044f UDP \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 threading \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0435. \u0414\u043b\u044f TCP \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043e\u0442 \u0432\u0441\u0435\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u043f\u043e\u0442\u043e\u043a\u0430\u0445. \u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_4/#_2","text":"\u0411\u044b\u043b \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0447\u0430\u0442 \u043d\u0430 Python \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c TCP \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0438 \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a socket. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0443\u044e threading \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u043e\u043a\u0430 \u043f\u043e\u0434 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u0447\u0430\u0442\u0430, \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0438 2 \u043f\u043e\u0442\u043e\u043a\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043b\u0438 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_4/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_4/#serverpy","text":"import socket import threading from config import HOST, PORT from msg_dataclass import Message clients = [] def send_message(client_socket: socket.socket, msg: Message): global clients msg = str(msg).encode() for client in clients: if client != client_socket: try: client.send(msg) except Exception as e: print(f\"Error {e} while sending message to client, stoping it's connection\") try: client.close() except: pass def process_client(client_socket: socket.socket, addr: tuple): global clients try: print(f\"New user with addr: {addr}\") while True: msg = client_socket.recv(16384).decode() msg = Message.parse_msg(msg) if msg.type == \"quit\": break msg.author = addr[1] send_message(client_socket, msg) except Exception as e: print(f\"error {e} while processing client {addr}\") finally: print(f\"stoping connection and thread for client {addr}\") try: msg = Message(type=\"stop\", author=\"server\") client_socket.send(str(msg).encode()) client_socket.close() except: pass clients.remove(client_socket) conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.bind((HOST, PORT)) conn.listen(10) try: while True: client_socket, addr = conn.accept() clients.append(client_socket) new_client_thread = threading.Thread(target=process_client, args=(client_socket, addr), daemon=True) new_client_thread.start() except Exception as e: print(f\"Error {e} while server running, trying to send messages of stop, and shutting down\") try: msg = Message(type=\"stop\", author=\"server\") send_message(conn, msg) except: print(\"err\") finally: conn.close()","title":"server.py"},{"location":"lab_1/task_4/#clientpy","text":"import socket import threading from config import HOST, PORT from msg_dataclass import Message def reciever(conn: socket.socket, stop: threading.Event): while not stop.is_set(): try: msg = conn.recv(16384).decode() msg = Message.parse_msg(msg) if msg.type == \"stop\" and msg.author == \"server\": stop.set() print(f\"recieved stop message from server\") break else: print(f\"{msg.author}: {msg.msg}\") except Exception as e: print(f\"error {e} while recieving\") stop.set() def sender(conn: socket.socket, stop: threading.Event): try: while not stop.is_set(): msg = input() if msg == \"exit\": stop.set() print(\"Exit command recieved\") break msg = Message(msg=msg) conn.send(str(msg).encode()) except Exception as e: print(f\"error {e} during sending msg\") stop.set() print('Type messages to send, type \"exit\" to stop client') conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) conn.connect((HOST, PORT)) stop = threading.Event() reciever_thread = threading.Thread(target=reciever, args=(conn, stop), daemon=True) sender_thread = threading.Thread(target=sender, args=(conn, stop), daemon=True) reciever_thread.start() sender_thread.start() try: while not stop.is_set(): stop.wait(timeout=0.5) except Exception as e: print(f\"Error {e} in client\") finally: try: msg = Message(type=\"quit\") conn.send(str(msg).encode()) except: pass print(\"shutting down client\") try: conn.close() except: pass","title":"client.py"},{"location":"lab_1/task_4/#msg_dataclasspy","text":"import json from dataclasses import dataclass, asdict @dataclass class Message: type: str = \"\" msg: str = \"\" author: str = \"self\" def __str__(self): return json.dumps(asdict(self)) @classmethod def parse_msg(cls, msg): msg = json.loads(msg) return cls(**msg)","title":"msg_dataclass.py"},{"location":"lab_1/task_4/#configpy","text":"HOST = \"127.0.0.1\" PORT = 14900","title":"config.py"},{"location":"lab_1/task_5/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 GET \u0438 POST HTTP-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 socket \u0432 Python. \u0417\u0430\u0434\u0430\u043d\u0438\u0435: \u0421\u0435\u0440\u0432\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d: \u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0438 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435 \u0438 \u043e\u0446\u0435\u043d\u043a\u0435 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435. \u041e\u0442\u0434\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e\u0431\u043e \u0432\u0441\u0435\u0445 \u043e\u0446\u0435\u043d\u043a\u0430\u0445 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430\u043c \u0432 \u0432\u0438\u0434\u0435 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0411\u044b\u043b\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0432\u0441\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0431\u0430\u0437\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0421\u043e\u0437\u0434\u0430\u043b \u043e\u0434\u043d\u0443 \u043d\u043e\u0432\u0443\u044e send_error, \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043e\u0448\u0438\u0431\u043a\u043e \u0438\u0437 \u043b\u044e\u0431\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043a\u043e\u0434\u0430. \u0422\u0430\u043a \u0436\u0435 \u0431\u044b\u043b \u043d\u0430\u043f\u0441\u0438\u0430\u043d, test.py, \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 post \u0437\u0430\u043f\u0440\u0441\u043e\u0432 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440. \u0421\u0435\u0440\u0432\u0435\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 post \u0438 get \u0437\u0430\u043f\u0440\u043e\u0441\u044b. \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430 server.py import socket from config import HOST, PORT class MyHTTPServer: def __init__(self, host, port, name): self.host = host self.port = port self.name = name self.grades = dict() def serve_forever(self): sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind((self.host, self.port)) sock.listen(10) print(f\"\u0421\u0435\u0440\u0432\u0435\u0440 \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u043d\u0430 http://{self.host}:{self.port}\") try: while True: client_sock, _ = sock.accept() self.serve_client(client_sock) finally: sock.close() def serve_client(self, client_sock): try: client_file = client_sock.makefile('rb') method, url, version, params = self.parse_request(client_file, client_sock) headers = self.parse_headers(client_file) self.handle_request(client_sock, method, params) client_file.close() except Exception as e: print(e) self.send_error(client_sock, \"400 Bad Request\") finally: client_sock.close() def parse_request(self, client_file, client_sock): request_line = client_file.readline().decode().strip() if not request_line: raise ValueError(\"\u041f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\") parts = request_line.split() if len(parts) != 3: raise ValueError(\"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0441\u0442\u0440\u043e\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\") method, url, version = parts params = dict() if '?' in url: try: url, params = url.split(\"?\") tmp = params.split(\"&\") params = dict() for i in tmp: key, value = i.split(\"=\") params[key] = value except Exception as e: print(e) self.send_error(client_sock, \"400 Bad Request\") return method, url, version, params def parse_headers(self, client_file): headers = {} while True: line = client_file.readline().decode().strip() if line == '': break key, value = line.split(':', 1) headers[key.strip()] = value.strip() return headers def handle_request(self, client_sock, method, params): if method == 'GET': html = \"<html><head><meta charset='utf-8'><title>\u041e\u0446\u0435\u043d\u043a\u0438</title></head><body>\" html += \"<h1>\u041e\u0446\u0435\u043d\u043a\u0438 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430\u043c</h1>\" if self.grades: html += \"<ul>\" for disc, grade in self.grades.items(): html += f\"<li>{disc}: {\", \".join(grade)}</li>\" html += \"</ul>\" else: html += \"<p>\u041d\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u043e\u0446\u0435\u043d\u043e\u043a.</p>\" self.send_response(client_sock, \"200 OK\", \"text/html; charset=utf-8\", html) elif method == 'POST': for key in params: if key in self.grades: self.grades[key].append(params[key]) else: self.grades[key] = [params[key]] self.send_response(client_sock, \"200 OK\", \"text/plain; charset=utf-8\", \"OK\") else: self.send_error(client_sock, \"404 Not Found\") def send_error(self, client_sock, status): self.send_response(client_sock, status, \"text/html; charset=utf-8\", f\"<h1>{status}</h1>\") def send_response(self, client_sock, status, content_type, body): response = f\"HTTP/1.1 {status}\\r\\n\" response += f\"Server: {self.name}\\r\\n\" response += f\"Connection: close\\r\\n\" response += f\"Content-Type: {content_type}\\r\\n\" response += f\"Content-Length: {len(body.encode())}\\r\\n\" response += \"\\r\\n\" response += body client_sock.send(response.encode()) if __name__ == '__main__': host = HOST port = PORT name = \"Grades\" serv = MyHTTPServer(host, port, name) try: serv.serve_forever() except KeyboardInterrupt: pass","title":"\u0417\u0430\u0434\u0430\u0447\u0430_5"},{"location":"lab_1/task_5/#5","text":"","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5"},{"location":"lab_1/task_5/#_1","text":"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 GET \u0438 POST HTTP-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 socket \u0432 Python. \u0417\u0430\u0434\u0430\u043d\u0438\u0435: \u0421\u0435\u0440\u0432\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d: \u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0438 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435 \u0438 \u043e\u0446\u0435\u043d\u043a\u0435 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435. \u041e\u0442\u0434\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e\u0431\u043e \u0432\u0441\u0435\u0445 \u043e\u0446\u0435\u043d\u043a\u0430\u0445 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430\u043c \u0432 \u0432\u0438\u0434\u0435 HTML-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"},{"location":"lab_1/task_5/#_2","text":"\u0411\u044b\u043b\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0432\u0441\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0431\u0430\u0437\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430 \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0421\u043e\u0437\u0434\u0430\u043b \u043e\u0434\u043d\u0443 \u043d\u043e\u0432\u0443\u044e send_error, \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043e\u0448\u0438\u0431\u043a\u043e \u0438\u0437 \u043b\u044e\u0431\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043a\u043e\u0434\u0430. \u0422\u0430\u043a \u0436\u0435 \u0431\u044b\u043b \u043d\u0430\u043f\u0441\u0438\u0430\u043d, test.py, \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 post \u0437\u0430\u043f\u0440\u0441\u043e\u0432 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440. \u0421\u0435\u0440\u0432\u0435\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 post \u0438 get \u0437\u0430\u043f\u0440\u043e\u0441\u044b.","title":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f"},{"location":"lab_1/task_5/#_3","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u043a\u043e\u0434\u0430"},{"location":"lab_1/task_5/#serverpy","text":"import socket from config import HOST, PORT class MyHTTPServer: def __init__(self, host, port, name): self.host = host self.port = port self.name = name self.grades = dict() def serve_forever(self): sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind((self.host, self.port)) sock.listen(10) print(f\"\u0421\u0435\u0440\u0432\u0435\u0440 \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u043d\u0430 http://{self.host}:{self.port}\") try: while True: client_sock, _ = sock.accept() self.serve_client(client_sock) finally: sock.close() def serve_client(self, client_sock): try: client_file = client_sock.makefile('rb') method, url, version, params = self.parse_request(client_file, client_sock) headers = self.parse_headers(client_file) self.handle_request(client_sock, method, params) client_file.close() except Exception as e: print(e) self.send_error(client_sock, \"400 Bad Request\") finally: client_sock.close() def parse_request(self, client_file, client_sock): request_line = client_file.readline().decode().strip() if not request_line: raise ValueError(\"\u041f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\") parts = request_line.split() if len(parts) != 3: raise ValueError(\"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0441\u0442\u0440\u043e\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\") method, url, version = parts params = dict() if '?' in url: try: url, params = url.split(\"?\") tmp = params.split(\"&\") params = dict() for i in tmp: key, value = i.split(\"=\") params[key] = value except Exception as e: print(e) self.send_error(client_sock, \"400 Bad Request\") return method, url, version, params def parse_headers(self, client_file): headers = {} while True: line = client_file.readline().decode().strip() if line == '': break key, value = line.split(':', 1) headers[key.strip()] = value.strip() return headers def handle_request(self, client_sock, method, params): if method == 'GET': html = \"<html><head><meta charset='utf-8'><title>\u041e\u0446\u0435\u043d\u043a\u0438</title></head><body>\" html += \"<h1>\u041e\u0446\u0435\u043d\u043a\u0438 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430\u043c</h1>\" if self.grades: html += \"<ul>\" for disc, grade in self.grades.items(): html += f\"<li>{disc}: {\", \".join(grade)}</li>\" html += \"</ul>\" else: html += \"<p>\u041d\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u043e\u0446\u0435\u043d\u043e\u043a.</p>\" self.send_response(client_sock, \"200 OK\", \"text/html; charset=utf-8\", html) elif method == 'POST': for key in params: if key in self.grades: self.grades[key].append(params[key]) else: self.grades[key] = [params[key]] self.send_response(client_sock, \"200 OK\", \"text/plain; charset=utf-8\", \"OK\") else: self.send_error(client_sock, \"404 Not Found\") def send_error(self, client_sock, status): self.send_response(client_sock, status, \"text/html; charset=utf-8\", f\"<h1>{status}</h1>\") def send_response(self, client_sock, status, content_type, body): response = f\"HTTP/1.1 {status}\\r\\n\" response += f\"Server: {self.name}\\r\\n\" response += f\"Connection: close\\r\\n\" response += f\"Content-Type: {content_type}\\r\\n\" response += f\"Content-Length: {len(body.encode())}\\r\\n\" response += \"\\r\\n\" response += body client_sock.send(response.encode()) if __name__ == '__main__': host = HOST port = PORT name = \"Grades\" serv = MyHTTPServer(host, port, name) try: serv.serve_forever() except KeyboardInterrupt: pass","title":"server.py"},{"location":"lab_2/task_1/","text":"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e \u0432\u0435\u0431 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 django \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0443\u0440\u0430\u043c\u0438 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0443\u0440\u0430\u0433\u0435\u043d\u0441\u0442\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u0445 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \u0438 \u043e\u0442\u0437\u044b\u0432\u0430\u043c\u0438 \u043e \u0442\u0443\u0440\u0430\u0445. \u0411\u044b\u043b\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c bootstrap, \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u044f \u0438 \u043f\u043e\u0438\u0441\u043a \u0442\u0443\u0440\u043e\u0432 \u043f\u043e \u0441\u0442\u0440\u0430\u043d\u0430\u043c, \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f\u043c \u0438 \u0442\u0443\u0440 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0443. \u0422\u0430\u043a \u0436\u0435 \u0432\u0441\u0451 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u0440\u0430\u043d\u043e \u0432 docker \u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043e\u043c docker-compose \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b. \u0417\u0430\u043f\u0443\u0441\u043a \u0414\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043d\u0443\u0436\u043d\u043e: \u0421\u043e\u0431\u0440\u0430\u0442\u044c docker image: docker build -t tour-site:latest . \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c compose: docker compose up -d \u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0443\u0440\u043e\u0432 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u041e\u0442\u0437\u044b\u0432\u044b \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0437\u044b\u0432\u0430 \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0412\u0445\u043e\u0434 \u0410\u0434\u043c\u0438\u043d\u0441\u043a\u0430\u044f \u043f\u0430\u043d\u0435\u043b\u044c \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u041c\u043e\u0434\u0435\u043b\u0438 from django.db import models from django.db import models from django.contrib.auth.models import User class Tour(models.Model): name = models.CharField(max_length=200, verbose_name=\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430\") agency = models.CharField(max_length=200, verbose_name=\"\u0422\u0443\u0440\u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e\") description = models.TextField(verbose_name=\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\") payment_terms = models.TextField(verbose_name=\"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043e\u043f\u043b\u0430\u0442\u044b\") country = models.CharField(max_length=100, verbose_name=\"\u0421\u0442\u0440\u0430\u043d\u0430\") def __str__(self): return self.name class Reservation(models.Model): user = models.ForeignKey(User, on_delete=models.CASCADE) tour = models.ForeignKey(Tour, on_delete=models.CASCADE) reservation_date = models.DateTimeField(auto_now_add=True) reservation_approve = models.BooleanField(default=False, verbose_name=\"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\") n_people = models.IntegerField(default=1, verbose_name=\"\u041a\u043e\u043b-\u0432\u043e \u043b\u044e\u0434\u0435\u0439 \u0432 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438\") start_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430\") end_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f\") def __str__(self): return f\"{self.user.username} - {self.tour.name}\" class Review(models.Model): tour = models.ForeignKey(Tour, on_delete=models.CASCADE) user = models.ForeignKey(User, on_delete=models.CASCADE) comment = models.TextField(verbose_name=\"\u0422\u0435\u043a\u0441\u0442 \u043e\u0442\u0437\u044b\u0432\u0430\") rating = models.IntegerField(choices=[(i, i) for i in range(1, 11)], verbose_name=\"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (1-10)\") created_at = models.DateTimeField(auto_now_add=True) def __str__(self): return f\"\u041e\u0442\u0437\u044b\u0432 \u043e\u0442 {self.user.username} \u043d\u0430 {self.tour.name}\" \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f from django.shortcuts import render, redirect, get_object_or_404 from django.contrib.auth.decorators import login_required from django.contrib import messages from django.views.generic import ListView from django.db.models import Q, Count, Avg from .models import Tour, Reservation, Review from .forms import UserRegisterForm, ReviewForm, ReserveForm TEMPLATES_DIR = 'tours/' def register(request): if request.method == 'POST': form = UserRegisterForm(request.POST) if form.is_valid(): form.save() username = form.cleaned_data.get('username') messages.success(request, f'\u0410\u043a\u043a\u0430\u0443\u043d\u0442 {username} \u0441\u043e\u0437\u0434\u0430\u043d') return redirect('login') else: form = UserRegisterForm() return render(request, f'{TEMPLATES_DIR}register.html', {'form': form}) class TourListView(ListView): model = Tour template_name = 'tours/tour_list.html' context_object_name = 'tours' paginate_by = 6 def get_queryset(self): queryset = Tour.objects.all().annotate( average_rating=Avg('review__rating') ) search_query = self.request.GET.get('search', '') if search_query: queryset = queryset.filter( Q(name__icontains=search_query) | Q(country__icontains=search_query) | Q(agency__icontains=search_query) ) return queryset.order_by('name') def get_context_data(self, **kwargs): context = super().get_context_data(**kwargs) context['search_query'] = self.request.GET.get('search', '') return context @login_required def reserve_tour(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) if request.method == 'POST': form = ReserveForm(request.POST) if form.is_valid(): reserve = form.save(commit=False) reserve.tour = tour reserve.user = request.user reserve.save() messages.success(request, '\u0422\u0443\u0440 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d') return redirect('my_reservations') else: form = ReserveForm() return render(request, f'{TEMPLATES_DIR}reserve_confirm.html', {'tour': tour, 'form': form}) @login_required def change_tour(request, tour_id, reservation_id): tour = get_object_or_404(Tour, id=tour_id) reservation = get_object_or_404(Reservation, id=reservation_id) if request.method == 'POST': form = ReserveForm(request.POST, instance=reservation) if form.is_valid(): reservation = form.save(commit=False) reservation.reservation_approve = False reservation.save() messages.success(request, '\u0422\u0443\u0440 \u0418\u0437\u043c\u0435\u043d\u0435\u043d') return redirect('my_reservations') else: form = ReserveForm(instance=reservation) return render(request, f'{TEMPLATES_DIR}reserve_confirm.html', {'tour': tour, 'form': form}) @login_required def my_reservations(request): reservations = Reservation.objects.filter(user=request.user) return render(request, f'{TEMPLATES_DIR}my_reservations.html', {'reservations': reservations}) @login_required def delete_reservation(request, reservation_id): reservation = get_object_or_404(Reservation, id=reservation_id, user=request.user) reservation.delete() messages.success(request, '\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e.') return redirect('my_reservations') @login_required def add_review(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) if request.method == 'POST': form = ReviewForm(request.POST) if form.is_valid(): review = form.save(commit=False) review.tour = tour review.user = request.user review.save() messages.success(request, '\u041e\u0442\u0437\u044b\u0432 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d') return redirect('tour_list') else: form = ReviewForm() return render(request, f'{TEMPLATES_DIR}add_review.html', {'tour': tour, 'form': form}) def sold_tours_by_country(request): data = Tour.objects.filter(reservation__isnull=False).values('country').annotate(count=Count('id')).order_by('-count') total_count = sum(item['count'] for item in data) return render(request, f'{TEMPLATES_DIR}sold_tours.html', {'data': data, 'total_count': total_count}) def tour_reviews(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) reviews = Review.objects.filter(tour=tour).order_by('-created_at') if reviews.exists(): from django.db.models import Avg avg_rating = reviews.aggregate(Avg('rating'))['rating__avg'] tour.average_rating = avg_rating else: tour.average_rating = None return render(request, 'tours/tour_reviews.html', {'tour': tour, 'reviews': reviews}) \u0424\u043e\u0440\u043c\u044b from django import forms from django.contrib.auth.models import User from django.contrib.auth.forms import UserCreationForm from .models import Review, Reservation class UserRegisterForm(UserCreationForm): email = forms.EmailField() class Meta: model = User fields = ['username', 'email', 'password1', 'password2'] class ReviewForm(forms.ModelForm): class Meta: model = Review fields = ['rating', 'comment'] widgets = { 'rating': forms.Select(attrs={'class': 'form-select'}), 'comment': forms.Textarea(attrs={ 'class': 'form-control', 'rows': 6, 'placeholder': '\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0432\u043e\u0438\u0445 \u0432\u043f\u0435\u0447\u0430\u0442\u043b\u0435\u043d\u0438\u044f\u0445 \u043e\u0442 \u0442\u0443\u0440\u0430...' }) } labels = { 'rating': '\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (1-10)', 'comment': '\u0412\u0430\u0448 \u043e\u0442\u0437\u044b\u0432' } class ReserveForm(forms.ModelForm): class Meta: model = Reservation fields = ['n_people', 'start_date', 'end_date'] widgets = { 'n_people': forms.NumberInput(attrs={ 'class': 'form-control', 'min': 1, 'placeholder': '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a' }), 'start_date': forms.DateInput(attrs={ 'type': 'date', 'class': 'form-control' }), 'end_date': forms.DateInput(attrs={ 'type': 'date', 'class': 'form-control' }) } labels = { 'n_people': '\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439', 'start_date': '\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430', 'end_date': '\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f' } def clean(self): cleaned_data = super().clean() start_date = cleaned_data.get('start_date') end_date = cleaned_data.get('end_date') n_people = cleaned_data.get('n_people') if start_date and end_date: if start_date >= end_date: raise forms.ValidationError('\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u043e\u0437\u0436\u0435 \u0434\u0430\u0442\u044b \u043d\u0430\u0447\u0430\u043b\u0430') if n_people and n_people < 1: raise forms.ValidationError('\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 1') return cleaned_data","title":"\u0417\u0430\u0434\u0430\u0447\u0430_1"},{"location":"lab_2/task_1/#_1","text":"\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e \u0432\u0435\u0431 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 django \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0443\u0440\u0430\u043c\u0438 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0443\u0440\u0430\u0433\u0435\u043d\u0441\u0442\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u0445 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \u0438 \u043e\u0442\u0437\u044b\u0432\u0430\u043c\u0438 \u043e \u0442\u0443\u0440\u0430\u0445. \u0411\u044b\u043b\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c bootstrap, \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u044f \u0438 \u043f\u043e\u0438\u0441\u043a \u0442\u0443\u0440\u043e\u0432 \u043f\u043e \u0441\u0442\u0440\u0430\u043d\u0430\u043c, \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f\u043c \u0438 \u0442\u0443\u0440 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0443. \u0422\u0430\u043a \u0436\u0435 \u0432\u0441\u0451 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u0440\u0430\u043d\u043e \u0432 docker \u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043e\u043c docker-compose \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b.","title":"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435"},{"location":"lab_2/task_1/#_2","text":"\u0414\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043d\u0443\u0436\u043d\u043e: \u0421\u043e\u0431\u0440\u0430\u0442\u044c docker image: docker build -t tour-site:latest . \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c compose: docker compose up -d","title":"\u0417\u0430\u043f\u0443\u0441\u043a"},{"location":"lab_2/task_1/#_3","text":"","title":"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b"},{"location":"lab_2/task_1/#_4","text":"","title":"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0443\u0440\u043e\u0432"},{"location":"lab_2/task_1/#_5","text":"","title":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"},{"location":"lab_2/task_1/#_6","text":"","title":"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"},{"location":"lab_2/task_1/#_7","text":"","title":"\u041e\u0442\u0437\u044b\u0432\u044b"},{"location":"lab_2/task_1/#_8","text":"","title":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0437\u044b\u0432\u0430"},{"location":"lab_2/task_1/#_9","text":"","title":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},{"location":"lab_2/task_1/#_10","text":"","title":"\u0412\u0445\u043e\u0434"},{"location":"lab_2/task_1/#_11","text":"","title":"\u0410\u0434\u043c\u0438\u043d\u0441\u043a\u0430\u044f \u043f\u0430\u043d\u0435\u043b\u044c"},{"location":"lab_2/task_1/#_12","text":"","title":"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f"},{"location":"lab_2/task_1/#_13","text":"from django.db import models from django.db import models from django.contrib.auth.models import User class Tour(models.Model): name = models.CharField(max_length=200, verbose_name=\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430\") agency = models.CharField(max_length=200, verbose_name=\"\u0422\u0443\u0440\u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e\") description = models.TextField(verbose_name=\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\") payment_terms = models.TextField(verbose_name=\"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043e\u043f\u043b\u0430\u0442\u044b\") country = models.CharField(max_length=100, verbose_name=\"\u0421\u0442\u0440\u0430\u043d\u0430\") def __str__(self): return self.name class Reservation(models.Model): user = models.ForeignKey(User, on_delete=models.CASCADE) tour = models.ForeignKey(Tour, on_delete=models.CASCADE) reservation_date = models.DateTimeField(auto_now_add=True) reservation_approve = models.BooleanField(default=False, verbose_name=\"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\") n_people = models.IntegerField(default=1, verbose_name=\"\u041a\u043e\u043b-\u0432\u043e \u043b\u044e\u0434\u0435\u0439 \u0432 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438\") start_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430\") end_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f\") def __str__(self): return f\"{self.user.username} - {self.tour.name}\" class Review(models.Model): tour = models.ForeignKey(Tour, on_delete=models.CASCADE) user = models.ForeignKey(User, on_delete=models.CASCADE) comment = models.TextField(verbose_name=\"\u0422\u0435\u043a\u0441\u0442 \u043e\u0442\u0437\u044b\u0432\u0430\") rating = models.IntegerField(choices=[(i, i) for i in range(1, 11)], verbose_name=\"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (1-10)\") created_at = models.DateTimeField(auto_now_add=True) def __str__(self): return f\"\u041e\u0442\u0437\u044b\u0432 \u043e\u0442 {self.user.username} \u043d\u0430 {self.tour.name}\"","title":"\u041c\u043e\u0434\u0435\u043b\u0438"},{"location":"lab_2/task_1/#_14","text":"from django.shortcuts import render, redirect, get_object_or_404 from django.contrib.auth.decorators import login_required from django.contrib import messages from django.views.generic import ListView from django.db.models import Q, Count, Avg from .models import Tour, Reservation, Review from .forms import UserRegisterForm, ReviewForm, ReserveForm TEMPLATES_DIR = 'tours/' def register(request): if request.method == 'POST': form = UserRegisterForm(request.POST) if form.is_valid(): form.save() username = form.cleaned_data.get('username') messages.success(request, f'\u0410\u043a\u043a\u0430\u0443\u043d\u0442 {username} \u0441\u043e\u0437\u0434\u0430\u043d') return redirect('login') else: form = UserRegisterForm() return render(request, f'{TEMPLATES_DIR}register.html', {'form': form}) class TourListView(ListView): model = Tour template_name = 'tours/tour_list.html' context_object_name = 'tours' paginate_by = 6 def get_queryset(self): queryset = Tour.objects.all().annotate( average_rating=Avg('review__rating') ) search_query = self.request.GET.get('search', '') if search_query: queryset = queryset.filter( Q(name__icontains=search_query) | Q(country__icontains=search_query) | Q(agency__icontains=search_query) ) return queryset.order_by('name') def get_context_data(self, **kwargs): context = super().get_context_data(**kwargs) context['search_query'] = self.request.GET.get('search', '') return context @login_required def reserve_tour(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) if request.method == 'POST': form = ReserveForm(request.POST) if form.is_valid(): reserve = form.save(commit=False) reserve.tour = tour reserve.user = request.user reserve.save() messages.success(request, '\u0422\u0443\u0440 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d') return redirect('my_reservations') else: form = ReserveForm() return render(request, f'{TEMPLATES_DIR}reserve_confirm.html', {'tour': tour, 'form': form}) @login_required def change_tour(request, tour_id, reservation_id): tour = get_object_or_404(Tour, id=tour_id) reservation = get_object_or_404(Reservation, id=reservation_id) if request.method == 'POST': form = ReserveForm(request.POST, instance=reservation) if form.is_valid(): reservation = form.save(commit=False) reservation.reservation_approve = False reservation.save() messages.success(request, '\u0422\u0443\u0440 \u0418\u0437\u043c\u0435\u043d\u0435\u043d') return redirect('my_reservations') else: form = ReserveForm(instance=reservation) return render(request, f'{TEMPLATES_DIR}reserve_confirm.html', {'tour': tour, 'form': form}) @login_required def my_reservations(request): reservations = Reservation.objects.filter(user=request.user) return render(request, f'{TEMPLATES_DIR}my_reservations.html', {'reservations': reservations}) @login_required def delete_reservation(request, reservation_id): reservation = get_object_or_404(Reservation, id=reservation_id, user=request.user) reservation.delete() messages.success(request, '\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e.') return redirect('my_reservations') @login_required def add_review(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) if request.method == 'POST': form = ReviewForm(request.POST) if form.is_valid(): review = form.save(commit=False) review.tour = tour review.user = request.user review.save() messages.success(request, '\u041e\u0442\u0437\u044b\u0432 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d') return redirect('tour_list') else: form = ReviewForm() return render(request, f'{TEMPLATES_DIR}add_review.html', {'tour': tour, 'form': form}) def sold_tours_by_country(request): data = Tour.objects.filter(reservation__isnull=False).values('country').annotate(count=Count('id')).order_by('-count') total_count = sum(item['count'] for item in data) return render(request, f'{TEMPLATES_DIR}sold_tours.html', {'data': data, 'total_count': total_count}) def tour_reviews(request, tour_id): tour = get_object_or_404(Tour, id=tour_id) reviews = Review.objects.filter(tour=tour).order_by('-created_at') if reviews.exists(): from django.db.models import Avg avg_rating = reviews.aggregate(Avg('rating'))['rating__avg'] tour.average_rating = avg_rating else: tour.average_rating = None return render(request, 'tours/tour_reviews.html', {'tour': tour, 'reviews': reviews})","title":"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f"},{"location":"lab_2/task_1/#_15","text":"from django import forms from django.contrib.auth.models import User from django.contrib.auth.forms import UserCreationForm from .models import Review, Reservation class UserRegisterForm(UserCreationForm): email = forms.EmailField() class Meta: model = User fields = ['username', 'email', 'password1', 'password2'] class ReviewForm(forms.ModelForm): class Meta: model = Review fields = ['rating', 'comment'] widgets = { 'rating': forms.Select(attrs={'class': 'form-select'}), 'comment': forms.Textarea(attrs={ 'class': 'form-control', 'rows': 6, 'placeholder': '\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0432\u043e\u0438\u0445 \u0432\u043f\u0435\u0447\u0430\u0442\u043b\u0435\u043d\u0438\u044f\u0445 \u043e\u0442 \u0442\u0443\u0440\u0430...' }) } labels = { 'rating': '\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (1-10)', 'comment': '\u0412\u0430\u0448 \u043e\u0442\u0437\u044b\u0432' } class ReserveForm(forms.ModelForm): class Meta: model = Reservation fields = ['n_people', 'start_date', 'end_date'] widgets = { 'n_people': forms.NumberInput(attrs={ 'class': 'form-control', 'min': 1, 'placeholder': '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a' }), 'start_date': forms.DateInput(attrs={ 'type': 'date', 'class': 'form-control' }), 'end_date': forms.DateInput(attrs={ 'type': 'date', 'class': 'form-control' }) } labels = { 'n_people': '\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439', 'start_date': '\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430', 'end_date': '\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f' } def clean(self): cleaned_data = super().clean() start_date = cleaned_data.get('start_date') end_date = cleaned_data.get('end_date') n_people = cleaned_data.get('n_people') if start_date and end_date: if start_date >= end_date: raise forms.ValidationError('\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u043e\u0437\u0436\u0435 \u0434\u0430\u0442\u044b \u043d\u0430\u0447\u0430\u043b\u0430') if n_people and n_people < 1: raise forms.ValidationError('\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 1') return cleaned_data","title":"\u0424\u043e\u0440\u043c\u044b"},{"location":"lab_3/lab/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 DjangoORM (\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0441 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u043c \u043d\u0430 \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438). 1. \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443 \u0440\u0430\u0431\u043e\u0442\u0443 API \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Django REST Framework (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043c\u0435\u0442\u043e\u0434\u044b \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438). \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 DjangoORM \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443 \u0440\u0430\u0431\u043e\u0442\u0443 API \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Django REST Framework \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e / \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0430\u043c / \u0432\u044b\u0432\u043e\u0434 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Djoser. \u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u0443\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0443, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u0443\u044e \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b. \u0422\u0430\u043a\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0442\u044c \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u0439 \u043e\u0431 \u0438\u043c\u0435\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u043d\u043e\u043c\u0435\u0440\u0430\u0445, \u043e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445 \u0438 \u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445, \u0443\u0431\u0438\u0440\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u043d\u043e\u043c\u0435\u0440\u0430\u0445. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0438 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043d\u043e\u043c\u0435\u0440\u0430 \u0442\u0440\u0435\u0445 \u0442\u0438\u043f\u043e\u0432: \u043e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439, \u0434\u0432\u0443\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439 \u0438 \u0442\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439, \u043e\u0442\u043b\u0438\u0447\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c\u044e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0432 \u0441\u0443\u0442\u043a\u0438. \u0412 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435 \u0435\u0441\u0442\u044c \u0442\u0435\u043b\u0435\u0444\u043e\u043d. \u041e \u043a\u0430\u0436\u0434\u043e\u043c \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0435\u043c \u0434\u043e\u043b\u0436\u043d\u0430 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f: \u043d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430, \u0444\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e, \u0433\u043e\u0440\u043e\u0434, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043e\u043d \u043f\u0440\u0438\u0431\u044b\u043b, \u0434\u0430\u0442\u0430 \u043f\u043e\u0441\u0435\u043b\u0435\u043d\u0438\u044f \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0447\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440. \u041e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f: \u0444\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e, \u0433\u0434\u0435 (\u044d\u0442\u0430\u0436) \u0438 \u043a\u043e\u0433\u0434\u0430 (\u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438) \u043e\u043d \u0443\u0431\u0438\u0440\u0430\u0435\u0442. \u0421\u043b\u0443\u0436\u0430\u0449\u0438\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0443\u0431\u0438\u0440\u0430\u0435\u0442 \u0432\u0441\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u043d\u0438 \u043d\u0435\u0434\u0435\u043b\u0438, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u0432 \u0440\u0430\u0437\u043d\u044b\u0435 \u0434\u043d\u0438 \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u0443\u0431\u0438\u0440\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u044d\u0442\u0430\u0436\u0438. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438: \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445, \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u0432\u0448\u0438\u0445 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435, \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438; \u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u043f\u0440\u0438\u0431\u044b\u0432\u0448\u0438\u0445 \u0438\u0437 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430, \u043e \u0442\u043e\u043c, \u043a\u0442\u043e \u0438\u0437 \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445 \u0443\u0431\u0438\u0440\u0430\u043b \u043d\u043e\u043c\u0435\u0440 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432; \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043c\u0435\u0441\u0442\u0430 \u0436\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043b\u0438 \u0432 \u0442\u0435 \u0436\u0435 \u0434\u043d\u0438, \u0447\u0442\u043e \u0438 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442, \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438: \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u0438\u043b\u0438 \u0443\u0432\u043e\u043b\u0438\u0442\u044c \u0441\u043b\u0443\u0436\u0430\u0449\u0435\u0433\u043e \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b; \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043b\u0443\u0436\u0430\u0449\u0435\u0433\u043e; \u043f\u043e\u0441\u0435\u043b\u0438\u0442\u044c \u0438\u043b\u0438 \u0432\u044b\u0441\u0435\u043b\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0430\u043a\u0436\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u044b\u0434\u0430\u0447\u0438 \u043e\u0442\u0447\u0435\u0442\u0430 \u043e \u0440\u0430\u0431\u043e\u0442\u0435 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0433\u043e\u0434\u0430. \u0422\u0430\u043a\u043e\u0439 \u043e\u0442\u0447\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f: \u0447\u0438\u0441\u043b\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435; \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u043d\u0435 \u043a\u0430\u0436\u0434\u043e\u043c \u044d\u0442\u0430\u0436\u0435; \u043e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0445\u043e\u0434\u0430 \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u043d\u043e\u043c\u0435\u0440; \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0439 \u0434\u043e\u0445\u043e\u0434 \u043f\u043e \u0432\u0441\u0435\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435. \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 1 \u041f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 DjangoORM \u0431\u044b\u043b\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u0430 \u043c\u043e\u0434\u0435\u043b\u044c \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445: from django.db import models class Floor(models.Model): number = models.PositiveIntegerField(unique=True, verbose_name=\"\u041d\u043e\u043c\u0435\u0440 \u044d\u0442\u0430\u0436\u0430\") description = models.TextField(null=True, blank=True, verbose_name=\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u044d\u0442\u0430\u0436\u0430\") class Room(models.Model): room_types = ( ('single', '\u041e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439'), ('double', '\u0414\u0432\u0443\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439'), ('triple', '\u0422\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439'), ) number = models.CharField(max_length=10, unique=True, verbose_name=\"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b\") room_type = models.CharField(max_length=10, choices=room_types, verbose_name=\"\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430\") price = models.DecimalField(max_digits=10, decimal_places=2, verbose_name=\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0437\u0430 \u0434\u0435\u043d\u044c\") phone = models.CharField(max_length=20, verbose_name=\"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0432 \u043d\u043e\u043c\u0435\u0440\u0435\") floor = models.ForeignKey(Floor, on_delete=models.CASCADE, related_name=\"rooms\", verbose_name=\"\u042d\u0442\u0430\u0436\") def __str__(self): return f\"\u041d\u043e\u043c\u0435\u0440 {self.number} ({self.get_room_type_display()})\" class Guest(models.Model): passport_number = models.CharField(max_length=20, unique=True, verbose_name=\"\u041d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430\") last_name = models.CharField(max_length=100, verbose_name=\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\") first_name = models.CharField(max_length=100, verbose_name=\"\u0418\u043c\u044f\") patronymic = models.CharField(max_length=100, blank=True, verbose_name=\"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e\") city = models.CharField(max_length=100, verbose_name=\"\u0413\u043e\u0440\u043e\u0434\") def __str__(self): return f\"{self.last_name} {self.first_name} ({self.passport_number})\" class LivingRecord(models.Model): guest = models.ForeignKey(Guest, on_delete=models.CASCADE, related_name=\"living_records\", verbose_name=\"\u0413\u043e\u0441\u0442\u044c\") room = models.ForeignKey(Room, on_delete=models.CASCADE, related_name=\"living_records\", verbose_name=\"\u041d\u043e\u043c\u0435\u0440\") start_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430\") end_date = models.DateField(null=True, blank=True, verbose_name=\"\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430\") def __str__(self): return f\"{self.guest} {self.room}\" class Staff(models.Model): last_name = models.CharField(max_length=100, verbose_name=\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\") first_name = models.CharField(max_length=100, verbose_name=\"\u0418\u043c\u044f\") patronymic = models.CharField(max_length=100, blank=True, verbose_name=\"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e\") def __str__(self): return f\"{self.last_name} {self.first_name}\" class CleaningSchedule(models.Model): days_of_week = ( (1, '\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a'), (2, '\u0412\u0442\u043e\u0440\u043d\u0438\u043a'), (3, '\u0421\u0440\u0435\u0434\u0430'), (4, '\u0427\u0435\u0442\u0432\u0435\u0440\u0433'), (5, '\u041f\u044f\u0442\u043d\u0438\u0446\u0430'), (6, '\u0421\u0443\u0431\u0431\u043e\u0442\u0430'), (7, '\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435'), ) staff = models.ForeignKey(Staff, on_delete=models.CASCADE, related_name=\"cleaning_schedules\", verbose_name=\"\u0421\u043b\u0443\u0436\u0430\u0449\u0438\u0439\") floor = models.ForeignKey(Floor, on_delete=models.CASCADE, related_name=\"cleaning_schedules\", verbose_name=\"\u042d\u0442\u0430\u0436\") day_of_week = models.PositiveSmallIntegerField(choices=days_of_week, verbose_name=\"\u0414\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438\") class Meta: unique_together = ('floor', 'day_of_week') def __str__(self): return f\"{self.staff} \u2014 \u044d\u0442\u0430\u0436 {self.floor}, {self.get_day_of_week_display()}\" class CleaningRecord(models.Model): staff = models.ForeignKey(Staff, on_delete=models.CASCADE, related_name=\"cleaning_records\", verbose_name=\"\u0421\u043b\u0443\u0436\u0430\u0449\u0438\u0439\") floor = models.ForeignKey(Floor, on_delete=models.CASCADE, related_name=\"cleaning_records\", verbose_name=\"\u042d\u0442\u0430\u0436\") cleaning_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u0443\u0431\u043e\u0440\u043a\u0438\") class Meta: unique_together = ('floor', 'cleaning_date') def __str__(self): return f\"{self.staff} \u2014 \u044d\u0442\u0430\u0436 {self.floor}, {self.cleaning_date}\" 2 \u041f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 Django REST Framework \u0431\u044b\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u044b \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 ViewSet \u0430 \u0442\u0430\u043a \u0436\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0430\u0441\u044c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 drf-yasg \u0434\u043b\u044f \u043a\u0440\u0430\u0441\u0438\u0432\u043e\u0433\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0441\u0432\u0430\u0433\u0433\u0435\u0440\u0430 \u0430\u043f\u0438. 3 \u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e \u043f\u043e \u0444\u043e\u0442\u043e \u0432\u044b\u0448\u0435 \u0442\u0430\u043a \u0436\u0435 \u0431\u044b\u043b\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0430\u043c \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 Djoser \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u043e\u043f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438\u0437 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u041b\u0438\u0441\u0442\u0438\u043d\u0433\u0438 \u0421\u0435\u0440\u0438\u0430\u043b\u0438\u0430\u0437\u0442\u043e\u0440\u044b from rest_framework import serializers from .models import Floor, Room, Guest, LivingRecord, Staff, CleaningSchedule, CleaningRecord class FloorSerializer(serializers.ModelSerializer): class Meta: model = Floor fields = '__all__' class RoomSerializer(serializers.ModelSerializer): class Meta: model = Room fields = '__all__' class GuestSerializer(serializers.ModelSerializer): class Meta: model = Guest fields = '__all__' class LivingRecordSerializer(serializers.ModelSerializer): guest = GuestSerializer(read_only=True) room = RoomSerializer(read_only=True) class Meta: model = LivingRecord fields = '__all__' class LivingRecordSimpleSerializer(serializers.ModelSerializer): class Meta: model = LivingRecord fields = '__all__' class StaffSerializer(serializers.ModelSerializer): class Meta: model = Staff fields = '__all__' class CleaningScheduleSerializer(serializers.ModelSerializer): staff = StaffSerializer(read_only=True) floor = FloorSerializer(read_only=True) class Meta: model = CleaningSchedule fields = '__all__' class CleaningScheduleSimpleSerializer(serializers.ModelSerializer): class Meta: model = CleaningSchedule fields = '__all__' class FloorFullSerializer(serializers.ModelSerializer): rooms = RoomSerializer(many=True, read_only=True) cleaning_schedules = CleaningScheduleSimpleSerializer(many=True, read_only=True) class Meta: model = Floor fields = '__all__' class StaffFullSerializer(serializers.ModelSerializer): cleaning_schedules = CleaningScheduleSerializer(many=True, read_only=True) class Meta: model = Staff fields = '__all__' class GuestFullSerializer(serializers.ModelSerializer): living_records = LivingRecordSerializer(many=True, read_only=True) class Meta: model = Guest fields = '__all__' class RoomFullSerializer(serializers.ModelSerializer): living_records = LivingRecordSerializer(many=True, read_only=True) floor = FloorFullSerializer(read_only=True) class Meta: model = Room fields = '__all__' class CleaningRecordSerializer(serializers.ModelSerializer): floor = FloorSerializer(read_only=True) staff = StaffSerializer(read_only=True) class Meta: model = CleaningRecord fields = '__all__' class CleaningRecordSimpleSerializer(serializers.ModelSerializer): class Meta: model = CleaningRecord fields = '__all__' \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f from rest_framework import viewsets, status from rest_framework.decorators import action, api_view from rest_framework.response import Response from .models import Floor, Room, Guest, LivingRecord, Staff, CleaningSchedule, CleaningRecord from .serializers import (FloorSerializer, RoomSerializer, GuestSerializer, LivingRecordSerializer, StaffSerializer, CleaningScheduleSerializer, FloorFullSerializer, RoomFullSerializer, GuestFullSerializer, StaffFullSerializer, CleaningScheduleSimpleSerializer, LivingRecordSimpleSerializer, CleaningRecordSerializer, CleaningRecordSimpleSerializer) from drf_yasg.utils import swagger_auto_schema from drf_yasg import openapi from datetime import date from django.db.models import Count, Q from django.utils.decorators import method_decorator def tagged_viewset(tag_name): def wrapper(cls): actions = ['list', 'create', 'retrieve', 'update', 'partial_update', 'destroy'] for action in actions: if hasattr(cls, action): decorator = swagger_auto_schema(tags=[tag_name]) setattr(cls, action, method_decorator(decorator, name=action)(getattr(cls, action))) return cls return wrapper @tagged_viewset('Floor') class FloorViewSet(viewsets.ModelViewSet): queryset = Floor.objects.all() serializer_class = FloorSerializer def get_serializer_class(self): if self.action == 'retrieve': return FloorFullSerializer return FloorSerializer @tagged_viewset('Room') class RoomViewSet(viewsets.ModelViewSet): queryset = Room.objects.all() serializer_class = RoomSerializer def get_serializer_class(self): if self.action == 'retrieve': return RoomFullSerializer return RoomSerializer @swagger_auto_schema( operation_description=\"\u041a\u043e\u043b-\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432\", responses={200: openapi.Response( description=\"\u041a\u043e\u043b-\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432\", schema=openapi.Schema(type=openapi.TYPE_INTEGER) )}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def count_not_occupied(self, request): today = date.today() n_free_rooms = Room.objects.exclude( Q(living_records__end_date__gte=today) | Q(living_records__end_date__isnull=True), living_records__start_date__lte=today).count() return Response(n_free_rooms) @tagged_viewset('Guest') class GuestViewSet(viewsets.ModelViewSet): queryset = Guest.objects.all() serializer_class = GuestSerializer def get_serializer_class(self): if self.action == 'retrieve': return GuestFullSerializer return GuestSerializer @swagger_auto_schema( operation_description=\"\u0413\u043e\u0441\u0442\u0438 \u043f\u043e \u0433\u043e\u0440\u043e\u0434\u0443\", manual_parameters=[ openapi.Parameter('city', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True) ], responses={200: openapi.Response( description=\"\u041a\u043e\u043b-\u0432\u043e \u0433\u043e\u0441\u0442\u0435\u0439 \u0438\u0437 \u0433\u043e\u0440\u043e\u0434\u0430\", schema=openapi.Schema(type=openapi.TYPE_INTEGER) )}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def count_by_city(self, request): city = request.query_params.get('city') if not city: return Response({\"error\": \"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 city\"}, status=status.HTTP_400_BAD_REQUEST) n_guests = Guest.objects.filter(city=city).count() return Response(n_guests) @swagger_auto_schema( operation_description=\"\u0413\u043e\u0441\u0442\u0438 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434 \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443\", manual_parameters=[ openapi.Parameter('room_id', openapi.IN_QUERY, type=openapi.TYPE_INTEGER, required=True), openapi.Parameter('start_date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True), openapi.Parameter('end_date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True) ], responses={200: GuestSerializer(many=True)}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def by_room_period(self, request): room_id = request.query_params.get('room_id') start = request.query_params.get('start_date') end = request.query_params.get('end_date') records = LivingRecord.objects.filter( Q(end_date__gte=start) | Q(end_date__isnull=True), room_id=room_id, start_date__lte=end, ).select_related('guest') guests = [record.guest for record in records] return Response(GuestSerializer(guests, many=True).data) @swagger_auto_schema( operation_description=\"\u0413\u043e\u0441\u0442\u0438 \u0432 \u0442\u043e\u0442 \u0436\u0435 \u043f\u0435\u0440\u0438\u043e\u0434 \u043f\u043e \u0433\u043e\u0441\u0442\u044e\", manual_parameters=[ openapi.Parameter('guest_id', openapi.IN_QUERY, type=openapi.TYPE_INTEGER, required=True), openapi.Parameter('start_date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True), openapi.Parameter('end_date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True) ], responses={200: GuestSerializer(many=True)}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def by_guest_period(self, request): guest_id = request.query_params.get('guest_id') start = request.query_params.get('start_date') end = request.query_params.get('end_date') guest_record = LivingRecord.objects.filter( guest_id=guest_id, start_date__gte=start, end_date__lte=end ).first() start = max(str(guest_record.start_date), start) end = min(str(guest_record.end_date) or end, end) guests = Guest.objects.filter( living_records__start_date__lte=end, living_records__end_date__gte=start ).exclude(pk=guest_id).distinct() return Response(GuestSerializer(guests, many=True).data) @tagged_viewset('LivingRecord') class LivingRecordViewSet(viewsets.ModelViewSet): queryset = LivingRecord.objects.all() serializer_class = LivingRecordSerializer def get_serializer_class(self): if self.action in ['create', 'update', 'partial_update']: return LivingRecordSimpleSerializer return LivingRecordSerializer @swagger_auto_schema( operation_description=\"\u041f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0441\u0435\u0439\u0447\u0430\u0441\", responses={200: LivingRecordSerializer}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def active(self, request): today_date = date.today() active_living_records = LivingRecord.objects.filter( Q(end_date__gte=today_date) | Q(end_date__isnull=True), start_date__lte=today_date ) return Response(LivingRecordSerializer(active_living_records, many=True).data) @tagged_viewset('Staff') class StaffViewSet(viewsets.ModelViewSet): queryset= Staff.objects.all() serializer_class = StaffSerializer def get_serializer_class(self): if self.action == 'retrieve': return StaffFullSerializer return StaffSerializer @swagger_auto_schema( operation_description=\"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0431\u0438\u0440\u0430\u043b \u043d\u043e\u043c\u0435\u0440 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0437\u0430\u0434\u0430\u043d\u044b\u0439 \u0434\u0435\u043d\u044c\", manual_parameters=[ openapi.Parameter('guest_id', openapi.IN_QUERY, type=openapi.TYPE_INTEGER, required=True), openapi.Parameter('date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True) ], responses={200: StaffSerializer(many=True)}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def by_guest_day(self, request): guest_id = request.query_params.get('guest_id') cleaning_date = request.query_params.get('date') if not guest_id or not date: return Response({\"error\": \"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u043d\u0443\u0436\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\"}, status=status.HTTP_400_BAD_REQUEST) try: living_record = LivingRecord.objects.filter( Q(end_date__gte=cleaning_date) | Q(end_date__isnull=True), guest_id=guest_id, start_date__lte=cleaning_date, ).first() if not living_record: return Response({\"error\": \"\u0414\u0430\u043d\u043d\u044b\u0439 \u0433\u043e\u0441\u0442\u044c \u043d\u0435 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043b \u0432 \u0434\u0430\u043d\u043d\u0443\u044e \u0434\u0430\u0442\u0443\"}, status=status.HTTP_400_BAD_REQUEST) floor = living_record.room.floor staff = CleaningRecord.objects.get(floor=floor, cleaning_date=cleaning_date).staff return Response(StaffSerializer(staff).data) except: return Response({\"error\": \"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435\"}, status=status.HTTP_500_INTERNAL_SERVER_ERROR) @tagged_viewset('CleaningSchedule') class CleaningScheduleViewSet(viewsets.ModelViewSet): queryset = CleaningSchedule.objects.all() serializer_class = CleaningScheduleSerializer def get_serializer_class(self): if self.action in ['create', 'update', 'partial_update']: return CleaningScheduleSimpleSerializer return CleaningScheduleSerializer @tagged_viewset('CleaningRecord') class CleaningRecordViewSet(viewsets.ModelViewSet): queryset = CleaningRecord.objects.all() serializer_class = CleaningRecordSerializer def get_serializer_class(self): print(self.queryset) if self.action in ['create', 'update', 'partial_update']: return CleaningRecordSimpleSerializer return CleaningRecordSerializer @swagger_auto_schema( method='get', operation_description=\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043e\u0442\u0447\u0451\u0442 \u0437\u0430 \u043a\u0432\u0430\u0440\u0442\u0430\u043b\", manual_parameters=[ openapi.Parameter('quarter', openapi.IN_QUERY, type=openapi.TYPE_INTEGER, required=True) ], responses={200: \"\u041e\u0442\u0447\u0451\u0442 \u0437\u0430 \u043a\u0432\u0430\u0440\u0442\u0430\u043b\"}, tags=['dop_requests'] ) @api_view(['GET']) def hotel_quarterly_report(request): quarter = request.query_params.get('quarter') year_now = date.today().year quarters = { 1: (date(year_now, 1, 1), date(year_now, 3, 31)), 2: (date(year_now, 4, 1), date(year_now, 6, 30)), 3: (date(year_now, 7, 1), date(year_now, 9, 30)), 4: (date(year_now, 10, 1), date(year_now, 12, 31)), } start_date, end_date = quarters[int(quarter)] rooms = Room.objects.all() room_report = [] income = 0 for room in rooms: living_records = LivingRecord.objects.filter( room=room, start_date__lte=end_date, end_date__gte=start_date ) guest_count = living_records.count() income_room = 0 for record in living_records: start = max(start_date, record.start_date) end = min(end_date, record.end_date or date.today()) if end < start: continue income_room += float(room.price) * (end - start).days + 1 room_report.append({ 'room_id': room.id, 'guests': guest_count, 'income': str(round(income_room, 2)) }) income += income_room floor_count = Floor.objects.annotate(room_count=Count('rooms')) floor_report = {floor.id: floor.room_count for floor in floor_count} return Response({ \"income\": str(round(income, 2)), \"room_report\": room_report, \"floor_report\": floor_report })","title":"\u0417\u0430\u0434\u0430\u0447\u0430_1"},{"location":"lab_3/lab/#_1","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 DjangoORM (\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0441 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u043c \u043d\u0430 \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438). 1. \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443 \u0440\u0430\u0431\u043e\u0442\u0443 API \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Django REST Framework (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043c\u0435\u0442\u043e\u0434\u044b \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438). \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 DjangoORM \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443 \u0440\u0430\u0431\u043e\u0442\u0443 API \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Django REST Framework \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e / \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0430\u043c / \u0432\u044b\u0432\u043e\u0434 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Djoser.","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435"},{"location":"lab_3/lab/#_2","text":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u0443\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0443, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u0443\u044e \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b. \u0422\u0430\u043a\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0442\u044c \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u0439 \u043e\u0431 \u0438\u043c\u0435\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u043d\u043e\u043c\u0435\u0440\u0430\u0445, \u043e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445 \u0438 \u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445, \u0443\u0431\u0438\u0440\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u043d\u043e\u043c\u0435\u0440\u0430\u0445. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0438 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043d\u043e\u043c\u0435\u0440\u0430 \u0442\u0440\u0435\u0445 \u0442\u0438\u043f\u043e\u0432: \u043e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439, \u0434\u0432\u0443\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439 \u0438 \u0442\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439, \u043e\u0442\u043b\u0438\u0447\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c\u044e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0432 \u0441\u0443\u0442\u043a\u0438. \u0412 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435 \u0435\u0441\u0442\u044c \u0442\u0435\u043b\u0435\u0444\u043e\u043d. \u041e \u043a\u0430\u0436\u0434\u043e\u043c \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0435\u043c \u0434\u043e\u043b\u0436\u043d\u0430 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f: \u043d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430, \u0444\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e, \u0433\u043e\u0440\u043e\u0434, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043e\u043d \u043f\u0440\u0438\u0431\u044b\u043b, \u0434\u0430\u0442\u0430 \u043f\u043e\u0441\u0435\u043b\u0435\u043d\u0438\u044f \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0447\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440. \u041e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f: \u0444\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e, \u0433\u0434\u0435 (\u044d\u0442\u0430\u0436) \u0438 \u043a\u043e\u0433\u0434\u0430 (\u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438) \u043e\u043d \u0443\u0431\u0438\u0440\u0430\u0435\u0442. \u0421\u043b\u0443\u0436\u0430\u0449\u0438\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0443\u0431\u0438\u0440\u0430\u0435\u0442 \u0432\u0441\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u043d\u0438 \u043d\u0435\u0434\u0435\u043b\u0438, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u0432 \u0440\u0430\u0437\u043d\u044b\u0435 \u0434\u043d\u0438 \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u0443\u0431\u0438\u0440\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u044d\u0442\u0430\u0436\u0438. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438: \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445, \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u0432\u0448\u0438\u0445 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435, \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438; \u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u043f\u0440\u0438\u0431\u044b\u0432\u0448\u0438\u0445 \u0438\u0437 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430, \u043e \u0442\u043e\u043c, \u043a\u0442\u043e \u0438\u0437 \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445 \u0443\u0431\u0438\u0440\u0430\u043b \u043d\u043e\u043c\u0435\u0440 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432; \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043c\u0435\u0441\u0442\u0430 \u0436\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043b\u0438 \u0432 \u0442\u0435 \u0436\u0435 \u0434\u043d\u0438, \u0447\u0442\u043e \u0438 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442, \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438: \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u0438\u043b\u0438 \u0443\u0432\u043e\u043b\u0438\u0442\u044c \u0441\u043b\u0443\u0436\u0430\u0449\u0435\u0433\u043e \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b; \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043b\u0443\u0436\u0430\u0449\u0435\u0433\u043e; \u043f\u043e\u0441\u0435\u043b\u0438\u0442\u044c \u0438\u043b\u0438 \u0432\u044b\u0441\u0435\u043b\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0430\u043a\u0436\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u044b\u0434\u0430\u0447\u0438 \u043e\u0442\u0447\u0435\u0442\u0430 \u043e \u0440\u0430\u0431\u043e\u0442\u0435 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0433\u043e\u0434\u0430. \u0422\u0430\u043a\u043e\u0439 \u043e\u0442\u0447\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f: \u0447\u0438\u0441\u043b\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435; \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u043d\u0435 \u043a\u0430\u0436\u0434\u043e\u043c \u044d\u0442\u0430\u0436\u0435; \u043e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0445\u043e\u0434\u0430 \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u043d\u043e\u043c\u0435\u0440; \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0439 \u0434\u043e\u0445\u043e\u0434 \u043f\u043e \u0432\u0441\u0435\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435.","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442"},{"location":"lab_3/lab/#_3","text":"","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"},{"location":"lab_3/lab/#1","text":"\u041f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 DjangoORM \u0431\u044b\u043b\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u0430 \u043c\u043e\u0434\u0435\u043b\u044c \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445: from django.db import models class Floor(models.Model): number = models.PositiveIntegerField(unique=True, verbose_name=\"\u041d\u043e\u043c\u0435\u0440 \u044d\u0442\u0430\u0436\u0430\") description = models.TextField(null=True, blank=True, verbose_name=\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u044d\u0442\u0430\u0436\u0430\") class Room(models.Model): room_types = ( ('single', '\u041e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439'), ('double', '\u0414\u0432\u0443\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439'), ('triple', '\u0422\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439'), ) number = models.CharField(max_length=10, unique=True, verbose_name=\"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b\") room_type = models.CharField(max_length=10, choices=room_types, verbose_name=\"\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430\") price = models.DecimalField(max_digits=10, decimal_places=2, verbose_name=\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0437\u0430 \u0434\u0435\u043d\u044c\") phone = models.CharField(max_length=20, verbose_name=\"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0432 \u043d\u043e\u043c\u0435\u0440\u0435\") floor = models.ForeignKey(Floor, on_delete=models.CASCADE, related_name=\"rooms\", verbose_name=\"\u042d\u0442\u0430\u0436\") def __str__(self): return f\"\u041d\u043e\u043c\u0435\u0440 {self.number} ({self.get_room_type_display()})\" class Guest(models.Model): passport_number = models.CharField(max_length=20, unique=True, verbose_name=\"\u041d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430\") last_name = models.CharField(max_length=100, verbose_name=\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\") first_name = models.CharField(max_length=100, verbose_name=\"\u0418\u043c\u044f\") patronymic = models.CharField(max_length=100, blank=True, verbose_name=\"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e\") city = models.CharField(max_length=100, verbose_name=\"\u0413\u043e\u0440\u043e\u0434\") def __str__(self): return f\"{self.last_name} {self.first_name} ({self.passport_number})\" class LivingRecord(models.Model): guest = models.ForeignKey(Guest, on_delete=models.CASCADE, related_name=\"living_records\", verbose_name=\"\u0413\u043e\u0441\u0442\u044c\") room = models.ForeignKey(Room, on_delete=models.CASCADE, related_name=\"living_records\", verbose_name=\"\u041d\u043e\u043c\u0435\u0440\") start_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430\") end_date = models.DateField(null=True, blank=True, verbose_name=\"\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430\") def __str__(self): return f\"{self.guest} {self.room}\" class Staff(models.Model): last_name = models.CharField(max_length=100, verbose_name=\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\") first_name = models.CharField(max_length=100, verbose_name=\"\u0418\u043c\u044f\") patronymic = models.CharField(max_length=100, blank=True, verbose_name=\"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e\") def __str__(self): return f\"{self.last_name} {self.first_name}\" class CleaningSchedule(models.Model): days_of_week = ( (1, '\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a'), (2, '\u0412\u0442\u043e\u0440\u043d\u0438\u043a'), (3, '\u0421\u0440\u0435\u0434\u0430'), (4, '\u0427\u0435\u0442\u0432\u0435\u0440\u0433'), (5, '\u041f\u044f\u0442\u043d\u0438\u0446\u0430'), (6, '\u0421\u0443\u0431\u0431\u043e\u0442\u0430'), (7, '\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435'), ) staff = models.ForeignKey(Staff, on_delete=models.CASCADE, related_name=\"cleaning_schedules\", verbose_name=\"\u0421\u043b\u0443\u0436\u0430\u0449\u0438\u0439\") floor = models.ForeignKey(Floor, on_delete=models.CASCADE, related_name=\"cleaning_schedules\", verbose_name=\"\u042d\u0442\u0430\u0436\") day_of_week = models.PositiveSmallIntegerField(choices=days_of_week, verbose_name=\"\u0414\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438\") class Meta: unique_together = ('floor', 'day_of_week') def __str__(self): return f\"{self.staff} \u2014 \u044d\u0442\u0430\u0436 {self.floor}, {self.get_day_of_week_display()}\" class CleaningRecord(models.Model): staff = models.ForeignKey(Staff, on_delete=models.CASCADE, related_name=\"cleaning_records\", verbose_name=\"\u0421\u043b\u0443\u0436\u0430\u0449\u0438\u0439\") floor = models.ForeignKey(Floor, on_delete=models.CASCADE, related_name=\"cleaning_records\", verbose_name=\"\u042d\u0442\u0430\u0436\") cleaning_date = models.DateField(verbose_name=\"\u0414\u0430\u0442\u0430 \u0443\u0431\u043e\u0440\u043a\u0438\") class Meta: unique_together = ('floor', 'cleaning_date') def __str__(self): return f\"{self.staff} \u2014 \u044d\u0442\u0430\u0436 {self.floor}, {self.cleaning_date}\"","title":"1"},{"location":"lab_3/lab/#2","text":"\u041f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 Django REST Framework \u0431\u044b\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u044b \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 ViewSet \u0430 \u0442\u0430\u043a \u0436\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0430\u0441\u044c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 drf-yasg \u0434\u043b\u044f \u043a\u0440\u0430\u0441\u0438\u0432\u043e\u0433\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0441\u0432\u0430\u0433\u0433\u0435\u0440\u0430 \u0430\u043f\u0438.","title":"2"},{"location":"lab_3/lab/#3","text":"\u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e \u043f\u043e \u0444\u043e\u0442\u043e \u0432\u044b\u0448\u0435 \u0442\u0430\u043a \u0436\u0435 \u0431\u044b\u043b\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0430\u043c \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 Djoser","title":"3"},{"location":"lab_3/lab/#_4","text":"","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u043e\u043f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438\u0437 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430"},{"location":"lab_3/lab/#_5","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433\u0438"},{"location":"lab_3/lab/#_6","text":"from rest_framework import serializers from .models import Floor, Room, Guest, LivingRecord, Staff, CleaningSchedule, CleaningRecord class FloorSerializer(serializers.ModelSerializer): class Meta: model = Floor fields = '__all__' class RoomSerializer(serializers.ModelSerializer): class Meta: model = Room fields = '__all__' class GuestSerializer(serializers.ModelSerializer): class Meta: model = Guest fields = '__all__' class LivingRecordSerializer(serializers.ModelSerializer): guest = GuestSerializer(read_only=True) room = RoomSerializer(read_only=True) class Meta: model = LivingRecord fields = '__all__' class LivingRecordSimpleSerializer(serializers.ModelSerializer): class Meta: model = LivingRecord fields = '__all__' class StaffSerializer(serializers.ModelSerializer): class Meta: model = Staff fields = '__all__' class CleaningScheduleSerializer(serializers.ModelSerializer): staff = StaffSerializer(read_only=True) floor = FloorSerializer(read_only=True) class Meta: model = CleaningSchedule fields = '__all__' class CleaningScheduleSimpleSerializer(serializers.ModelSerializer): class Meta: model = CleaningSchedule fields = '__all__' class FloorFullSerializer(serializers.ModelSerializer): rooms = RoomSerializer(many=True, read_only=True) cleaning_schedules = CleaningScheduleSimpleSerializer(many=True, read_only=True) class Meta: model = Floor fields = '__all__' class StaffFullSerializer(serializers.ModelSerializer): cleaning_schedules = CleaningScheduleSerializer(many=True, read_only=True) class Meta: model = Staff fields = '__all__' class GuestFullSerializer(serializers.ModelSerializer): living_records = LivingRecordSerializer(many=True, read_only=True) class Meta: model = Guest fields = '__all__' class RoomFullSerializer(serializers.ModelSerializer): living_records = LivingRecordSerializer(many=True, read_only=True) floor = FloorFullSerializer(read_only=True) class Meta: model = Room fields = '__all__' class CleaningRecordSerializer(serializers.ModelSerializer): floor = FloorSerializer(read_only=True) staff = StaffSerializer(read_only=True) class Meta: model = CleaningRecord fields = '__all__' class CleaningRecordSimpleSerializer(serializers.ModelSerializer): class Meta: model = CleaningRecord fields = '__all__'","title":"\u0421\u0435\u0440\u0438\u0430\u043b\u0438\u0430\u0437\u0442\u043e\u0440\u044b"},{"location":"lab_3/lab/#_7","text":"from rest_framework import viewsets, status from rest_framework.decorators import action, api_view from rest_framework.response import Response from .models import Floor, Room, Guest, LivingRecord, Staff, CleaningSchedule, CleaningRecord from .serializers import (FloorSerializer, RoomSerializer, GuestSerializer, LivingRecordSerializer, StaffSerializer, CleaningScheduleSerializer, FloorFullSerializer, RoomFullSerializer, GuestFullSerializer, StaffFullSerializer, CleaningScheduleSimpleSerializer, LivingRecordSimpleSerializer, CleaningRecordSerializer, CleaningRecordSimpleSerializer) from drf_yasg.utils import swagger_auto_schema from drf_yasg import openapi from datetime import date from django.db.models import Count, Q from django.utils.decorators import method_decorator def tagged_viewset(tag_name): def wrapper(cls): actions = ['list', 'create', 'retrieve', 'update', 'partial_update', 'destroy'] for action in actions: if hasattr(cls, action): decorator = swagger_auto_schema(tags=[tag_name]) setattr(cls, action, method_decorator(decorator, name=action)(getattr(cls, action))) return cls return wrapper @tagged_viewset('Floor') class FloorViewSet(viewsets.ModelViewSet): queryset = Floor.objects.all() serializer_class = FloorSerializer def get_serializer_class(self): if self.action == 'retrieve': return FloorFullSerializer return FloorSerializer @tagged_viewset('Room') class RoomViewSet(viewsets.ModelViewSet): queryset = Room.objects.all() serializer_class = RoomSerializer def get_serializer_class(self): if self.action == 'retrieve': return RoomFullSerializer return RoomSerializer @swagger_auto_schema( operation_description=\"\u041a\u043e\u043b-\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432\", responses={200: openapi.Response( description=\"\u041a\u043e\u043b-\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432\", schema=openapi.Schema(type=openapi.TYPE_INTEGER) )}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def count_not_occupied(self, request): today = date.today() n_free_rooms = Room.objects.exclude( Q(living_records__end_date__gte=today) | Q(living_records__end_date__isnull=True), living_records__start_date__lte=today).count() return Response(n_free_rooms) @tagged_viewset('Guest') class GuestViewSet(viewsets.ModelViewSet): queryset = Guest.objects.all() serializer_class = GuestSerializer def get_serializer_class(self): if self.action == 'retrieve': return GuestFullSerializer return GuestSerializer @swagger_auto_schema( operation_description=\"\u0413\u043e\u0441\u0442\u0438 \u043f\u043e \u0433\u043e\u0440\u043e\u0434\u0443\", manual_parameters=[ openapi.Parameter('city', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True) ], responses={200: openapi.Response( description=\"\u041a\u043e\u043b-\u0432\u043e \u0433\u043e\u0441\u0442\u0435\u0439 \u0438\u0437 \u0433\u043e\u0440\u043e\u0434\u0430\", schema=openapi.Schema(type=openapi.TYPE_INTEGER) )}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def count_by_city(self, request): city = request.query_params.get('city') if not city: return Response({\"error\": \"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 city\"}, status=status.HTTP_400_BAD_REQUEST) n_guests = Guest.objects.filter(city=city).count() return Response(n_guests) @swagger_auto_schema( operation_description=\"\u0413\u043e\u0441\u0442\u0438 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434 \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443\", manual_parameters=[ openapi.Parameter('room_id', openapi.IN_QUERY, type=openapi.TYPE_INTEGER, required=True), openapi.Parameter('start_date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True), openapi.Parameter('end_date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True) ], responses={200: GuestSerializer(many=True)}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def by_room_period(self, request): room_id = request.query_params.get('room_id') start = request.query_params.get('start_date') end = request.query_params.get('end_date') records = LivingRecord.objects.filter( Q(end_date__gte=start) | Q(end_date__isnull=True), room_id=room_id, start_date__lte=end, ).select_related('guest') guests = [record.guest for record in records] return Response(GuestSerializer(guests, many=True).data) @swagger_auto_schema( operation_description=\"\u0413\u043e\u0441\u0442\u0438 \u0432 \u0442\u043e\u0442 \u0436\u0435 \u043f\u0435\u0440\u0438\u043e\u0434 \u043f\u043e \u0433\u043e\u0441\u0442\u044e\", manual_parameters=[ openapi.Parameter('guest_id', openapi.IN_QUERY, type=openapi.TYPE_INTEGER, required=True), openapi.Parameter('start_date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True), openapi.Parameter('end_date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True) ], responses={200: GuestSerializer(many=True)}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def by_guest_period(self, request): guest_id = request.query_params.get('guest_id') start = request.query_params.get('start_date') end = request.query_params.get('end_date') guest_record = LivingRecord.objects.filter( guest_id=guest_id, start_date__gte=start, end_date__lte=end ).first() start = max(str(guest_record.start_date), start) end = min(str(guest_record.end_date) or end, end) guests = Guest.objects.filter( living_records__start_date__lte=end, living_records__end_date__gte=start ).exclude(pk=guest_id).distinct() return Response(GuestSerializer(guests, many=True).data) @tagged_viewset('LivingRecord') class LivingRecordViewSet(viewsets.ModelViewSet): queryset = LivingRecord.objects.all() serializer_class = LivingRecordSerializer def get_serializer_class(self): if self.action in ['create', 'update', 'partial_update']: return LivingRecordSimpleSerializer return LivingRecordSerializer @swagger_auto_schema( operation_description=\"\u041f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0441\u0435\u0439\u0447\u0430\u0441\", responses={200: LivingRecordSerializer}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def active(self, request): today_date = date.today() active_living_records = LivingRecord.objects.filter( Q(end_date__gte=today_date) | Q(end_date__isnull=True), start_date__lte=today_date ) return Response(LivingRecordSerializer(active_living_records, many=True).data) @tagged_viewset('Staff') class StaffViewSet(viewsets.ModelViewSet): queryset= Staff.objects.all() serializer_class = StaffSerializer def get_serializer_class(self): if self.action == 'retrieve': return StaffFullSerializer return StaffSerializer @swagger_auto_schema( operation_description=\"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0431\u0438\u0440\u0430\u043b \u043d\u043e\u043c\u0435\u0440 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0437\u0430\u0434\u0430\u043d\u044b\u0439 \u0434\u0435\u043d\u044c\", manual_parameters=[ openapi.Parameter('guest_id', openapi.IN_QUERY, type=openapi.TYPE_INTEGER, required=True), openapi.Parameter('date', openapi.IN_QUERY, type=openapi.TYPE_STRING, required=True) ], responses={200: StaffSerializer(many=True)}, tags=['dop_requests'] ) @action(detail=False, methods=['get']) def by_guest_day(self, request): guest_id = request.query_params.get('guest_id') cleaning_date = request.query_params.get('date') if not guest_id or not date: return Response({\"error\": \"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u043d\u0443\u0436\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\"}, status=status.HTTP_400_BAD_REQUEST) try: living_record = LivingRecord.objects.filter( Q(end_date__gte=cleaning_date) | Q(end_date__isnull=True), guest_id=guest_id, start_date__lte=cleaning_date, ).first() if not living_record: return Response({\"error\": \"\u0414\u0430\u043d\u043d\u044b\u0439 \u0433\u043e\u0441\u0442\u044c \u043d\u0435 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043b \u0432 \u0434\u0430\u043d\u043d\u0443\u044e \u0434\u0430\u0442\u0443\"}, status=status.HTTP_400_BAD_REQUEST) floor = living_record.room.floor staff = CleaningRecord.objects.get(floor=floor, cleaning_date=cleaning_date).staff return Response(StaffSerializer(staff).data) except: return Response({\"error\": \"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435\"}, status=status.HTTP_500_INTERNAL_SERVER_ERROR) @tagged_viewset('CleaningSchedule') class CleaningScheduleViewSet(viewsets.ModelViewSet): queryset = CleaningSchedule.objects.all() serializer_class = CleaningScheduleSerializer def get_serializer_class(self): if self.action in ['create', 'update', 'partial_update']: return CleaningScheduleSimpleSerializer return CleaningScheduleSerializer @tagged_viewset('CleaningRecord') class CleaningRecordViewSet(viewsets.ModelViewSet): queryset = CleaningRecord.objects.all() serializer_class = CleaningRecordSerializer def get_serializer_class(self): print(self.queryset) if self.action in ['create', 'update', 'partial_update']: return CleaningRecordSimpleSerializer return CleaningRecordSerializer @swagger_auto_schema( method='get', operation_description=\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043e\u0442\u0447\u0451\u0442 \u0437\u0430 \u043a\u0432\u0430\u0440\u0442\u0430\u043b\", manual_parameters=[ openapi.Parameter('quarter', openapi.IN_QUERY, type=openapi.TYPE_INTEGER, required=True) ], responses={200: \"\u041e\u0442\u0447\u0451\u0442 \u0437\u0430 \u043a\u0432\u0430\u0440\u0442\u0430\u043b\"}, tags=['dop_requests'] ) @api_view(['GET']) def hotel_quarterly_report(request): quarter = request.query_params.get('quarter') year_now = date.today().year quarters = { 1: (date(year_now, 1, 1), date(year_now, 3, 31)), 2: (date(year_now, 4, 1), date(year_now, 6, 30)), 3: (date(year_now, 7, 1), date(year_now, 9, 30)), 4: (date(year_now, 10, 1), date(year_now, 12, 31)), } start_date, end_date = quarters[int(quarter)] rooms = Room.objects.all() room_report = [] income = 0 for room in rooms: living_records = LivingRecord.objects.filter( room=room, start_date__lte=end_date, end_date__gte=start_date ) guest_count = living_records.count() income_room = 0 for record in living_records: start = max(start_date, record.start_date) end = min(end_date, record.end_date or date.today()) if end < start: continue income_room += float(room.price) * (end - start).days + 1 room_report.append({ 'room_id': room.id, 'guests': guest_count, 'income': str(round(income_room, 2)) }) income += income_room floor_count = Floor.objects.annotate(room_count=Count('rooms')) floor_report = {floor.id: floor.room_count for floor in floor_count} return Response({ \"income\": str(round(income, 2)), \"room_report\": room_report, \"floor_report\": floor_report })","title":"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f"},{"location":"lab_4/lab/","text":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u0438, \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0432 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u21163 CORS (Cross-origin resource sharing) \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0447\u0451\u0442\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u044c\u044e. \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u044c\u044e \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c vuetify \u0438\u043b\u0438 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u0443\u044e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443. \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 1 \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 cors \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 django-cors-headers \u0412 settings.py \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u043e\u0439 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0430 vue \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 CORS_ALLOWED_ORIGINS 2 3 \u0414\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u043e\u0436\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0441\u0442\u043a\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0441\u043e\u0432, \u0431\u044b\u043b\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u043f\u043e\u0434 \u043a\u0430\u0436\u0434\u0443\u044e \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430\u0445 \u0438 \u043e\u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0430\u0441\u044c \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043a\u0430\u043a \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0442\u0430\u043a \u0438 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439 \u0432\u0435\u0437\u0434\u0435, \u0433\u0434\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e. \u0414\u043b\u044f \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439 \u0431\u044b\u043b\u0430 \u0441\u0434\u0435\u043b\u0430\u043d\u0430 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c, \u0441\u043e\u0437\u0434\u0430\u0442\u044c, \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c, \u0443\u0434\u0430\u043b\u0438\u0442\u044c, \u0430 \u0442\u0430\u043a \u0436\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u0438 1 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439. \u0413\u043e\u0441\u0442\u0438 \u0417\u0430\u043f\u0438\u0441\u0438 \u043e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u0438 \u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u041a\u043e\u043c\u043d\u0430\u0442\u044b \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0443\u0431\u043e\u0440\u043a\u043e\u043a \u0417\u0430\u043f\u0438\u0441\u0438 \u043e\u0431 \u0443\u0431\u043e\u0440\u043a\u0430\u0445 \u042d\u0442\u0430\u0436\u0438 \u0414\u043e\u043f \u0437\u0430\u043f\u0440\u043e\u0441\u044b","title":"\u0417\u0430\u0434\u0430\u0447\u0430_1"},{"location":"lab_4/lab/#_1","text":"\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u0438, \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0432 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u21163 CORS (Cross-origin resource sharing) \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0447\u0451\u0442\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u044c\u044e. \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u044c\u044e \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c vuetify \u0438\u043b\u0438 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u0443\u044e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443.","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435"},{"location":"lab_4/lab/#_2","text":"","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"},{"location":"lab_4/lab/#1","text":"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 cors \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 django-cors-headers \u0412 settings.py \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u043e\u0439 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0430 vue \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 CORS_ALLOWED_ORIGINS","title":"1"},{"location":"lab_4/lab/#2","text":"","title":"2"},{"location":"lab_4/lab/#3","text":"\u0414\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u043e\u0436\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0441\u0442\u043a\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0441\u043e\u0432, \u0431\u044b\u043b\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u043f\u043e\u0434 \u043a\u0430\u0436\u0434\u0443\u044e \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430\u0445 \u0438 \u043e\u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0430\u0441\u044c \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043a\u0430\u043a \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0442\u0430\u043a \u0438 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439 \u0432\u0435\u0437\u0434\u0435, \u0433\u0434\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e. \u0414\u043b\u044f \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439 \u0431\u044b\u043b\u0430 \u0441\u0434\u0435\u043b\u0430\u043d\u0430 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c, \u0441\u043e\u0437\u0434\u0430\u0442\u044c, \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c, \u0443\u0434\u0430\u043b\u0438\u0442\u044c, \u0430 \u0442\u0430\u043a \u0436\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u0438 1 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439.","title":"3"},{"location":"lab_4/lab/#_3","text":"","title":"\u0413\u043e\u0441\u0442\u0438"},{"location":"lab_4/lab/#_4","text":"","title":"\u0417\u0430\u043f\u0438\u0441\u0438 \u043e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u0438"},{"location":"lab_4/lab/#_5","text":"","title":"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"},{"location":"lab_4/lab/#_6","text":"","title":"\u041a\u043e\u043c\u043d\u0430\u0442\u044b"},{"location":"lab_4/lab/#_7","text":"","title":"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0443\u0431\u043e\u0440\u043a\u043e\u043a"},{"location":"lab_4/lab/#_8","text":"","title":"\u0417\u0430\u043f\u0438\u0441\u0438 \u043e\u0431 \u0443\u0431\u043e\u0440\u043a\u0430\u0445"},{"location":"lab_4/lab/#_9","text":"","title":"\u042d\u0442\u0430\u0436\u0438"},{"location":"lab_4/lab/#_10","text":"","title":"\u0414\u043e\u043f \u0437\u0430\u043f\u0440\u043e\u0441\u044b"},{"location":"practice_31/practice_3_1/","text":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 1 \u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 6-7 \u043d\u043e\u0432\u044b\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0438 5-6 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439, \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u043d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0435 \u0438 \u043e\u0442 1 \u0434\u043e 3 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439. \u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043b\u0438\u0431\u043e \u0432 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0442\u043e\u0440\u0430, \u043b\u0438\u0431\u043e \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c python-\u0444\u0430\u0439\u043b\u0435. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u043c \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u0442\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432. \u0415\u0441\u043b\u0438 \u0432\u044b \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u043e\u0434 .add(), \u043d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u0430\u043a\u0436\u0435 \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0442\u0438\u0432\u043d\u0443\u044e \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u201c\u0432\u043b\u0430\u0434\u0435\u043d\u0438\u0435\u201d \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0434\u0432\u0430 python \u0441\u043a\u0440\u0438\u043f\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f python manage.py practice_3_1_1 python manage.py practice_3_1_1_print \u043f\u0435\u0440\u0432\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442 \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u0437\u0430\u043f\u0438\u0441\u0438, \u0432\u0442\u043e\u0440\u043e\u0439 \u0432\u044b\u0432\u043e\u0434\u0438\u0442 \u0432\u0441\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 2 \u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u041f\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u043c \u0432 \u043f\u0440.1 \u0434\u0430\u043d\u043d\u044b\u043c \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e: \u0413\u0434\u0435 \u044d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e, \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 related_name \u043a \u043f\u043e\u043b\u044f\u043c \u043c\u043e\u0434\u0435\u043b\u0438 \u0412\u044b\u0432\u0435\u0434\u0435\u0442\u0435 \u0432\u0441\u0435 \u043c\u0430\u0448\u0438\u043d\u044b \u043c\u0430\u0440\u043a\u0438 \u201cToyota\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u043c\u0430\u0440\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c) \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u201c\u041e\u043b\u0435\u0433\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u044b\u043c \u0434\u0440\u0443\u0433\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u043d\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435) \u0412\u0437\u044f\u0432 \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0435\u0433\u043e id, \u0438 \u043f\u043e \u044d\u0442\u043e\u043c\u0443 id \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0432 \u0432\u0438\u0434\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043c\u043e\u0434\u0435\u043b\u0438 (\u043c\u043e\u0436\u043d\u043e \u0432 2 \u0437\u0430\u043f\u0440\u043e\u0441\u0430) \u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043a\u0440\u0430\u0441\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0446\u0432\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443 \u0432\u0430\u0441 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442) \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432, \u0447\u0435\u0439 \u0433\u043e\u0434 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 2010 (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0443 \u0432\u0430\u0441 \u0432 \u0431\u0430\u0437\u0435) \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0411\u044b\u043b \u0441\u043e\u0437\u0434\u0430\u043d \u0441\u043a\u0440\u0438\u043f\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c python manage.py practice_3_1_2 \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 3 \u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b c \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432: \u0412\u044b\u0432\u043e\u0434 \u0434\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0448\u0435\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0430\u043c\u0443\u044e \u043f\u043e\u0437\u0434\u043d\u044e\u044e \u0434\u0430\u0442\u0443 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439, \u0438\u043c\u0435\u044e\u0449\u0443\u044e \u043a\u0430\u043a\u0443\u044e-\u0442\u043e \u0438\u0437 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0432 \u0432\u0430\u0448\u0435\u0439 \u0431\u0430\u0437\u0435 \u0412\u044b\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u041f\u043e\u0434\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0430\u0440\u043a\u0438 \u041e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0441\u0435\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043f\u043e \u0434\u0430\u0442\u0435 \u0432\u044b\u0434\u0430\u0447\u0438 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f (\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u043e\u0434\u043d\u0438 \u0438 \u0442\u0435 \u0436\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u043c\u0435\u0442\u043e\u0434\u043e\u043c .distinct() \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0411\u044b\u043b \u0441\u043e\u0437\u0434\u0430\u043d \u0441\u043a\u0440\u0438\u043f\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c python manage.py practice_3_1_3 \u041b\u0438\u0441\u0442\u0438\u043d\u0433\u0438 1 from django.core.management.base import BaseCommand from datetime import datetime from cars.models import CarOwner, Car, DriverLicense from random import choice class Command(BaseCommand): def handle(self, *args, **options): cars = [ Car.objects.create(license_plate=\"A111AA\", brand=\"Toyota\", model=\"Camry\", color=\"Black\"), Car.objects.create(license_plate=\"B222BB\", brand=\"BMW\", model=\"X5\", color=\"White\"), Car.objects.create(license_plate=\"C333CC\", brand=\"Audi\", model=\"A6\", color=\"Gray\"), Car.objects.create(license_plate=\"D444DD\", brand=\"Tesla\", model=\"Model 3\", color=\"Red\"), Car.objects.create(license_plate=\"E555EE\", brand=\"Ford\", model=\"Focus\", color=\"White\"), ] owners = [ CarOwner.objects.create(surname=\"\u0418\u0432\u0430\u043d\u043e\u0432\", name=\"\u0418\u0432\u0430\u043d\"), CarOwner.objects.create(surname=\"\u041f\u0435\u0442\u0440\u043e\u0432\", name=\"\u041f\u0451\u0442\u0440\"), CarOwner.objects.create(surname=\"\u0421\u0438\u0434\u043e\u0440\u043e\u0432\", name=\"\u0421\u0438\u0434\u043e\u0440\"), CarOwner.objects.create(surname=\"\u0421\u043c\u0438\u0440\u043d\u043e\u0432\u0430\", name=\"\u0410\u043d\u043d\u0430\"), CarOwner.objects.create(surname=\"\u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432\", name=\"\u041e\u043b\u0435\u0433\"), CarOwner.objects.create(surname=\"\u0412\u043e\u043b\u043a\u043e\u0432\u0430\", name=\"\u041c\u0430\u0440\u0438\u044f\"), ] license_types = [\"A\", \"B\", \"C\", \"D\", \"BE\", \"CE\"] for owner, l_type in zip(owners, license_types): DriverLicense.objects.create( owner=owner, license_number=f\"DL-{owner.id:04}\", license_type=l_type, issue_date=datetime(2010, 1, 1), ) owners[0].cars.add( cars[0], cars[1], through_defaults={\"start_date\": datetime(2010, 1, 1)} ) owners[1].cars.add( cars[2], through_defaults={\"start_date\": datetime(2022, 5, 10)} ) owners[2].cars.add( cars[3], cars[4], through_defaults={\"start_date\": datetime(2010, 3, 15)} ) owners[3].cars.add( cars[1], through_defaults={ \"start_date\": datetime(2019, 6, 1), \"end_date\": datetime(2023, 6, 1), } ) owners[4].cars.add( cars[0], cars[2], cars[3], through_defaults={\"start_date\": datetime(2021, 9, 9)} ) owners[5].cars.add( cars[4], through_defaults={\"start_date\": datetime(2024, 1, 1)} ) 2 from django.core.management.base import BaseCommand from cars.models import CarOwner, Car, DriverLicense class Command(BaseCommand): def handle(self, *args, **options): self.stdout.write(f'\u0412\u0441\u0435 \u043c\u0430\u0448\u0438\u043d\u044b \u043c\u0430\u0440\u043a\u0438 Toyta:\\n{\"\\n\".join(map(str, Car.objects.filter(brand=\"Toyota\")))}') print(\"********************************\") self.stdout.write(f'\u0412\u0441\u0435 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0438 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u201c\u041e\u043b\u0435\u0433\u201d:\\n{\"\\n\".join(map(str, CarOwner.objects.filter(name=\"\u041e\u043b\u0435\u0433\")))}') print(\"********************************\") random_owner_id = CarOwner.objects.order_by('?').first().id self.stdout.write(f'\u041f\u0440\u0430\u0432\u0430 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f:\\n{\"\\n\".join(map(str, DriverLicense.objects.filter(owner_id=random_owner_id)))}') print(\"********************************\") self.stdout.write(f'\u0412\u0441\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b \u0431\u0435\u043b\u044b\u0445 \u043c\u0430\u0448\u0438\u043d:\\n{\"\\n\".join(map(str, CarOwner.objects.filter(cars__color=\"White\")))}') print(\"********************************\") self.stdout.write(f'\u0412\u0441\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b, \u0447\u0435\u0439 \u0433\u043e\u0434 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 2010 :\\n{\"\\n\".join(map(str, CarOwner.objects.filter(ownership__start_date__year=2010).distinct()))}') 3 from django.core.management.base import BaseCommand from cars.models import CarOwner, Car, DriverLicense, Ownership from django.db.models import Min, Max, Count class Command(BaseCommand): def handle(self, *args, **options): self.stdout.write(f'\u0421\u0430\u043c\u044b\u0435 \u0441\u0442\u0430\u0440\u044b\u0435 \u043f\u0440\u0430\u0432\u0430:\\n{DriverLicense.objects.aggregate(Min(\"issue_date\"))[\"issue_date__min\"]}') print(\"********************************\") self.stdout.write(f'\u0421\u0430\u043c\u0430\u044f \u043f\u043e\u0437\u0434\u043d\u044f\u044f \u0434\u0430\u0442\u0430 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f:\\n{Ownership.objects.aggregate(Max(\"start_date\"))[\"start_date__max\"]}') print(\"********************************\") owners = CarOwner.objects.annotate(n_cars=Count('cars')) ans = '' for i in owners: ans += f\"{str(i)}: {i.n_cars}\\n\" self.stdout.write(f'\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f: \\n {ans}') print(\"********************************\") brands = Car.objects.values(\"brand\").annotate(Count(\"id\")) ans = '' for i in brands: ans += f\"{i[\"brand\"]}: {i[\"id__count\"]}\\n\" self.stdout.write(f'\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0430\u0440\u043a\u0438: \\n {ans}') print(\"********************************\") owners = CarOwner.objects.order_by(\"driverlicense__issue_date\") self.stdout.write(f\"\u0412\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0432\u044b\u0434\u0430\u0447\u0435 \u043f\u0440\u0430\u0432: \\n{\"\\n\".join(map(str, owners))}\")","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 3.1"},{"location":"practice_31/practice_3_1/#1","text":"","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 1"},{"location":"practice_31/practice_3_1/#_1","text":"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 6-7 \u043d\u043e\u0432\u044b\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0438 5-6 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439, \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u043d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0435 \u0438 \u043e\u0442 1 \u0434\u043e 3 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439. \u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043b\u0438\u0431\u043e \u0432 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0442\u043e\u0440\u0430, \u043b\u0438\u0431\u043e \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c python-\u0444\u0430\u0439\u043b\u0435. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u043c \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u0442\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432. \u0415\u0441\u043b\u0438 \u0432\u044b \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u043e\u0434 .add(), \u043d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u0430\u043a\u0436\u0435 \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0442\u0438\u0432\u043d\u0443\u044e \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u201c\u0432\u043b\u0430\u0434\u0435\u043d\u0438\u0435\u201d","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435"},{"location":"practice_31/practice_3_1/#_2","text":"\u0431\u044b\u043b\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0434\u0432\u0430 python \u0441\u043a\u0440\u0438\u043f\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f python manage.py practice_3_1_1 python manage.py practice_3_1_1_print \u043f\u0435\u0440\u0432\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442 \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u0437\u0430\u043f\u0438\u0441\u0438, \u0432\u0442\u043e\u0440\u043e\u0439 \u0432\u044b\u0432\u043e\u0434\u0438\u0442 \u0432\u0441\u0435 \u0437\u0430\u043f\u0438\u0441\u0438","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"},{"location":"practice_31/practice_3_1/#2","text":"","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 2"},{"location":"practice_31/practice_3_1/#_3","text":"\u041f\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u043c \u0432 \u043f\u0440.1 \u0434\u0430\u043d\u043d\u044b\u043c \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e: \u0413\u0434\u0435 \u044d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e, \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 related_name \u043a \u043f\u043e\u043b\u044f\u043c \u043c\u043e\u0434\u0435\u043b\u0438 \u0412\u044b\u0432\u0435\u0434\u0435\u0442\u0435 \u0432\u0441\u0435 \u043c\u0430\u0448\u0438\u043d\u044b \u043c\u0430\u0440\u043a\u0438 \u201cToyota\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u043c\u0430\u0440\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c) \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u201c\u041e\u043b\u0435\u0433\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u044b\u043c \u0434\u0440\u0443\u0433\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u043d\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435) \u0412\u0437\u044f\u0432 \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0435\u0433\u043e id, \u0438 \u043f\u043e \u044d\u0442\u043e\u043c\u0443 id \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0432 \u0432\u0438\u0434\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043c\u043e\u0434\u0435\u043b\u0438 (\u043c\u043e\u0436\u043d\u043e \u0432 2 \u0437\u0430\u043f\u0440\u043e\u0441\u0430) \u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043a\u0440\u0430\u0441\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0446\u0432\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443 \u0432\u0430\u0441 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442) \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432, \u0447\u0435\u0439 \u0433\u043e\u0434 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 2010 (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0443 \u0432\u0430\u0441 \u0432 \u0431\u0430\u0437\u0435)","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435"},{"location":"practice_31/practice_3_1/#_4","text":"\u0411\u044b\u043b \u0441\u043e\u0437\u0434\u0430\u043d \u0441\u043a\u0440\u0438\u043f\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c python manage.py practice_3_1_2","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"},{"location":"practice_31/practice_3_1/#3","text":"","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 3"},{"location":"practice_31/practice_3_1/#_5","text":"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b c \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432: \u0412\u044b\u0432\u043e\u0434 \u0434\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0448\u0435\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0430\u043c\u0443\u044e \u043f\u043e\u0437\u0434\u043d\u044e\u044e \u0434\u0430\u0442\u0443 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439, \u0438\u043c\u0435\u044e\u0449\u0443\u044e \u043a\u0430\u043a\u0443\u044e-\u0442\u043e \u0438\u0437 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0432 \u0432\u0430\u0448\u0435\u0439 \u0431\u0430\u0437\u0435 \u0412\u044b\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u041f\u043e\u0434\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0430\u0440\u043a\u0438 \u041e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0441\u0435\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043f\u043e \u0434\u0430\u0442\u0435 \u0432\u044b\u0434\u0430\u0447\u0438 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f (\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u043e\u0434\u043d\u0438 \u0438 \u0442\u0435 \u0436\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u043c\u0435\u0442\u043e\u0434\u043e\u043c .distinct()","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435"},{"location":"practice_31/practice_3_1/#_6","text":"\u0411\u044b\u043b \u0441\u043e\u0437\u0434\u0430\u043d \u0441\u043a\u0440\u0438\u043f\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c python manage.py practice_3_1_3","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"},{"location":"practice_31/practice_3_1/#_7","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433\u0438"},{"location":"practice_31/practice_3_1/#1_1","text":"from django.core.management.base import BaseCommand from datetime import datetime from cars.models import CarOwner, Car, DriverLicense from random import choice class Command(BaseCommand): def handle(self, *args, **options): cars = [ Car.objects.create(license_plate=\"A111AA\", brand=\"Toyota\", model=\"Camry\", color=\"Black\"), Car.objects.create(license_plate=\"B222BB\", brand=\"BMW\", model=\"X5\", color=\"White\"), Car.objects.create(license_plate=\"C333CC\", brand=\"Audi\", model=\"A6\", color=\"Gray\"), Car.objects.create(license_plate=\"D444DD\", brand=\"Tesla\", model=\"Model 3\", color=\"Red\"), Car.objects.create(license_plate=\"E555EE\", brand=\"Ford\", model=\"Focus\", color=\"White\"), ] owners = [ CarOwner.objects.create(surname=\"\u0418\u0432\u0430\u043d\u043e\u0432\", name=\"\u0418\u0432\u0430\u043d\"), CarOwner.objects.create(surname=\"\u041f\u0435\u0442\u0440\u043e\u0432\", name=\"\u041f\u0451\u0442\u0440\"), CarOwner.objects.create(surname=\"\u0421\u0438\u0434\u043e\u0440\u043e\u0432\", name=\"\u0421\u0438\u0434\u043e\u0440\"), CarOwner.objects.create(surname=\"\u0421\u043c\u0438\u0440\u043d\u043e\u0432\u0430\", name=\"\u0410\u043d\u043d\u0430\"), CarOwner.objects.create(surname=\"\u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432\", name=\"\u041e\u043b\u0435\u0433\"), CarOwner.objects.create(surname=\"\u0412\u043e\u043b\u043a\u043e\u0432\u0430\", name=\"\u041c\u0430\u0440\u0438\u044f\"), ] license_types = [\"A\", \"B\", \"C\", \"D\", \"BE\", \"CE\"] for owner, l_type in zip(owners, license_types): DriverLicense.objects.create( owner=owner, license_number=f\"DL-{owner.id:04}\", license_type=l_type, issue_date=datetime(2010, 1, 1), ) owners[0].cars.add( cars[0], cars[1], through_defaults={\"start_date\": datetime(2010, 1, 1)} ) owners[1].cars.add( cars[2], through_defaults={\"start_date\": datetime(2022, 5, 10)} ) owners[2].cars.add( cars[3], cars[4], through_defaults={\"start_date\": datetime(2010, 3, 15)} ) owners[3].cars.add( cars[1], through_defaults={ \"start_date\": datetime(2019, 6, 1), \"end_date\": datetime(2023, 6, 1), } ) owners[4].cars.add( cars[0], cars[2], cars[3], through_defaults={\"start_date\": datetime(2021, 9, 9)} ) owners[5].cars.add( cars[4], through_defaults={\"start_date\": datetime(2024, 1, 1)} )","title":"1"},{"location":"practice_31/practice_3_1/#2_1","text":"from django.core.management.base import BaseCommand from cars.models import CarOwner, Car, DriverLicense class Command(BaseCommand): def handle(self, *args, **options): self.stdout.write(f'\u0412\u0441\u0435 \u043c\u0430\u0448\u0438\u043d\u044b \u043c\u0430\u0440\u043a\u0438 Toyta:\\n{\"\\n\".join(map(str, Car.objects.filter(brand=\"Toyota\")))}') print(\"********************************\") self.stdout.write(f'\u0412\u0441\u0435 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0438 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u201c\u041e\u043b\u0435\u0433\u201d:\\n{\"\\n\".join(map(str, CarOwner.objects.filter(name=\"\u041e\u043b\u0435\u0433\")))}') print(\"********************************\") random_owner_id = CarOwner.objects.order_by('?').first().id self.stdout.write(f'\u041f\u0440\u0430\u0432\u0430 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f:\\n{\"\\n\".join(map(str, DriverLicense.objects.filter(owner_id=random_owner_id)))}') print(\"********************************\") self.stdout.write(f'\u0412\u0441\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b \u0431\u0435\u043b\u044b\u0445 \u043c\u0430\u0448\u0438\u043d:\\n{\"\\n\".join(map(str, CarOwner.objects.filter(cars__color=\"White\")))}') print(\"********************************\") self.stdout.write(f'\u0412\u0441\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b, \u0447\u0435\u0439 \u0433\u043e\u0434 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 2010 :\\n{\"\\n\".join(map(str, CarOwner.objects.filter(ownership__start_date__year=2010).distinct()))}')","title":"2"},{"location":"practice_31/practice_3_1/#3_1","text":"from django.core.management.base import BaseCommand from cars.models import CarOwner, Car, DriverLicense, Ownership from django.db.models import Min, Max, Count class Command(BaseCommand): def handle(self, *args, **options): self.stdout.write(f'\u0421\u0430\u043c\u044b\u0435 \u0441\u0442\u0430\u0440\u044b\u0435 \u043f\u0440\u0430\u0432\u0430:\\n{DriverLicense.objects.aggregate(Min(\"issue_date\"))[\"issue_date__min\"]}') print(\"********************************\") self.stdout.write(f'\u0421\u0430\u043c\u0430\u044f \u043f\u043e\u0437\u0434\u043d\u044f\u044f \u0434\u0430\u0442\u0430 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f:\\n{Ownership.objects.aggregate(Max(\"start_date\"))[\"start_date__max\"]}') print(\"********************************\") owners = CarOwner.objects.annotate(n_cars=Count('cars')) ans = '' for i in owners: ans += f\"{str(i)}: {i.n_cars}\\n\" self.stdout.write(f'\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f: \\n {ans}') print(\"********************************\") brands = Car.objects.values(\"brand\").annotate(Count(\"id\")) ans = '' for i in brands: ans += f\"{i[\"brand\"]}: {i[\"id__count\"]}\\n\" self.stdout.write(f'\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0430\u0440\u043a\u0438: \\n {ans}') print(\"********************************\") owners = CarOwner.objects.order_by(\"driverlicense__issue_date\") self.stdout.write(f\"\u0412\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u044b \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0432\u044b\u0434\u0430\u0447\u0435 \u043f\u0440\u0430\u0432: \\n{\"\\n\".join(map(str, owners))}\")","title":"3"},{"location":"practice_32/practice_3_2/","text":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 1 \u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0441\u043a\u0438\u043b\u043e\u0432 \u043c\u0435\u0442\u043e\u0434\u043e\u043c, \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u043c \u0432 \u043f\u0443\u043d\u043a\u0442\u0435 \u0432\u044b\u0448\u0435. \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 2 \u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435: \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b: \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u0441\u0435\u0445 \u0432\u043e\u0439\u043d\u0430\u0445 \u0438 \u0438\u0445 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f\u0445 (\u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435). \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u0441\u0435\u0445 \u0432\u043e\u0439\u043d\u0430\u0445 \u0438 \u0438\u0445 \u0441\u043a\u0438\u043b\u0430\u0445 (\u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435). \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u043e\u0439\u043d\u0435 (\u043f\u043e id), \u0435\u0433\u043e \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f\u0445 \u0438 \u0441\u043a\u0438\u043b\u0430\u0445. \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0432\u043e\u0439\u043d\u0430 \u043f\u043e id. \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u043e\u0439\u043d\u0435. \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u041b\u0438\u0441\u0442\u0438\u043d\u0433 \u0421\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440\u044b from rest_framework import serializers from .models import * class SkillSerializer(serializers.ModelSerializer): class Meta: model = Skill fields = \"__all__\" class ProfessionSerializer(serializers.ModelSerializer): class Meta: model = Profession fields = \"__all__\" class WarriorCreateSerializer(serializers.ModelSerializer): profession = serializers.PrimaryKeyRelatedField(queryset=Profession.objects.all(), required=False, allow_null=True) class Meta: model = Warrior fields = ['race', 'name', 'level', 'profession'] class WarriorsWithProfessionSerializer(serializers.ModelSerializer): profession = ProfessionSerializer() class Meta: model = Warrior fields = \"__all__\" class WarriorsWithSkillsSerializer(serializers.ModelSerializer): skill = SkillSerializer(many=True) class Meta: model = Warrior fields = \"__all__\" class WarriorFullSerializer(serializers.ModelSerializer): profession = ProfessionSerializer() skill = SkillSerializer(many=True) class Meta: model = Warrior fields = \"__all__\" class SkillOfWarriorSerializer(serializers.Serializer): id = serializers.IntegerField() level = serializers.IntegerField(min_value=1) class WarriorUpdateSerializer(serializers.ModelSerializer): profession = serializers.PrimaryKeyRelatedField(queryset=Profession.objects.all(), required=False, allow_null=True) skills = SkillOfWarriorSerializer(many=True, required=False) class Meta: model = Warrior fields = ['name', 'race', 'level', 'profession', 'skills'] def update(self, instance, validated_data): instance.name = validated_data.get('name', instance.name) instance.race = validated_data.get('race', instance.race) instance.level = validated_data.get('level', instance.level) instance.profession = validated_data.get('profession', instance.profession) instance.save() skills_data = validated_data.get('skills') if skills_data is not None: SkillOfWarrior.objects.filter(warrior=instance).delete() for skill_item in skills_data: skill_id = skill_item['id'] skill_level = skill_item['level'] if not Skill.objects.filter(id=skill_id).exists(): raise serializers.ValidationError(f\"Skill \u0441 id={skill_id} \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.\") SkillOfWarrior.objects.create( warrior=instance, skill_id=skill_id, level=skill_level ) return instance \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f from rest_framework.views import APIView from rest_framework import generics from rest_framework.response import Response from .models import Skill, Warrior from .serializers import * class SkillAPIView(APIView): def get(self, request): skills = Skill.objects.all() serializer = SkillSerializer(skills, many=True) return Response({\"skills\": serializer.data}) def post(self, request): skill = request.data.get(\"skill\") serializer = SkillSerializer(data=skill) if serializer.is_valid(raise_exception=True): skill_saved = serializer.save() return Response({\"Success\": \"Skill '{}' created succesfully.\".format(skill_saved.title)}) class WarriorWithProffesionAPIView(generics.ListAPIView): queryset = Warrior.objects.all() serializer_class = WarriorsWithProfessionSerializer class WarriorWithSkillsAPIView(generics.ListAPIView): queryset = Warrior.objects.all() serializer_class = WarriorsWithSkillsSerializer class WarriorFullByIdAPIView(generics.RetrieveAPIView): queryset = Warrior.objects.all() serializer_class = WarriorFullSerializer class WarriorUpdateAPIView(generics.UpdateAPIView): queryset = Warrior.objects.all() serializer_class = WarriorUpdateSerializer class WarriorDeleteAPIView(generics.DestroyAPIView): queryset = Warrior.objects.all() class WarriorCreateAPIView(generics.CreateAPIView): queryset = Warrior.objects.all() serializer_class = WarriorCreateSerializer class ProfessionCreateAPIView(generics.CreateAPIView): queryset = Profession.objects.all() serializer_class = ProfessionSerializer","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 3.2"},{"location":"practice_32/practice_3_2/#1","text":"","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 1"},{"location":"practice_32/practice_3_2/#_1","text":"\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0441\u043a\u0438\u043b\u043e\u0432 \u043c\u0435\u0442\u043e\u0434\u043e\u043c, \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u043c \u0432 \u043f\u0443\u043d\u043a\u0442\u0435 \u0432\u044b\u0448\u0435.","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435"},{"location":"practice_32/practice_3_2/#_2","text":"","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"},{"location":"practice_32/practice_3_2/#2","text":"","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 2"},{"location":"practice_32/practice_3_2/#_3","text":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435: \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b: \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u0441\u0435\u0445 \u0432\u043e\u0439\u043d\u0430\u0445 \u0438 \u0438\u0445 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f\u0445 (\u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435). \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u0441\u0435\u0445 \u0432\u043e\u0439\u043d\u0430\u0445 \u0438 \u0438\u0445 \u0441\u043a\u0438\u043b\u0430\u0445 (\u0432 \u043e\u0434\u043d\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435). \u0412\u044b\u0432\u043e\u0434 \u043f\u043e\u043b\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u043e\u0439\u043d\u0435 (\u043f\u043e id), \u0435\u0433\u043e \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f\u0445 \u0438 \u0441\u043a\u0438\u043b\u0430\u0445. \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0432\u043e\u0439\u043d\u0430 \u043f\u043e id. \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0432\u043e\u0439\u043d\u0435.","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435"},{"location":"practice_32/practice_3_2/#_4","text":"","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"},{"location":"practice_32/practice_3_2/#_5","text":"","title":"\u041b\u0438\u0441\u0442\u0438\u043d\u0433"},{"location":"practice_32/practice_3_2/#_6","text":"from rest_framework import serializers from .models import * class SkillSerializer(serializers.ModelSerializer): class Meta: model = Skill fields = \"__all__\" class ProfessionSerializer(serializers.ModelSerializer): class Meta: model = Profession fields = \"__all__\" class WarriorCreateSerializer(serializers.ModelSerializer): profession = serializers.PrimaryKeyRelatedField(queryset=Profession.objects.all(), required=False, allow_null=True) class Meta: model = Warrior fields = ['race', 'name', 'level', 'profession'] class WarriorsWithProfessionSerializer(serializers.ModelSerializer): profession = ProfessionSerializer() class Meta: model = Warrior fields = \"__all__\" class WarriorsWithSkillsSerializer(serializers.ModelSerializer): skill = SkillSerializer(many=True) class Meta: model = Warrior fields = \"__all__\" class WarriorFullSerializer(serializers.ModelSerializer): profession = ProfessionSerializer() skill = SkillSerializer(many=True) class Meta: model = Warrior fields = \"__all__\" class SkillOfWarriorSerializer(serializers.Serializer): id = serializers.IntegerField() level = serializers.IntegerField(min_value=1) class WarriorUpdateSerializer(serializers.ModelSerializer): profession = serializers.PrimaryKeyRelatedField(queryset=Profession.objects.all(), required=False, allow_null=True) skills = SkillOfWarriorSerializer(many=True, required=False) class Meta: model = Warrior fields = ['name', 'race', 'level', 'profession', 'skills'] def update(self, instance, validated_data): instance.name = validated_data.get('name', instance.name) instance.race = validated_data.get('race', instance.race) instance.level = validated_data.get('level', instance.level) instance.profession = validated_data.get('profession', instance.profession) instance.save() skills_data = validated_data.get('skills') if skills_data is not None: SkillOfWarrior.objects.filter(warrior=instance).delete() for skill_item in skills_data: skill_id = skill_item['id'] skill_level = skill_item['level'] if not Skill.objects.filter(id=skill_id).exists(): raise serializers.ValidationError(f\"Skill \u0441 id={skill_id} \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.\") SkillOfWarrior.objects.create( warrior=instance, skill_id=skill_id, level=skill_level ) return instance","title":"\u0421\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440\u044b"},{"location":"practice_32/practice_3_2/#_7","text":"from rest_framework.views import APIView from rest_framework import generics from rest_framework.response import Response from .models import Skill, Warrior from .serializers import * class SkillAPIView(APIView): def get(self, request): skills = Skill.objects.all() serializer = SkillSerializer(skills, many=True) return Response({\"skills\": serializer.data}) def post(self, request): skill = request.data.get(\"skill\") serializer = SkillSerializer(data=skill) if serializer.is_valid(raise_exception=True): skill_saved = serializer.save() return Response({\"Success\": \"Skill '{}' created succesfully.\".format(skill_saved.title)}) class WarriorWithProffesionAPIView(generics.ListAPIView): queryset = Warrior.objects.all() serializer_class = WarriorsWithProfessionSerializer class WarriorWithSkillsAPIView(generics.ListAPIView): queryset = Warrior.objects.all() serializer_class = WarriorsWithSkillsSerializer class WarriorFullByIdAPIView(generics.RetrieveAPIView): queryset = Warrior.objects.all() serializer_class = WarriorFullSerializer class WarriorUpdateAPIView(generics.UpdateAPIView): queryset = Warrior.objects.all() serializer_class = WarriorUpdateSerializer class WarriorDeleteAPIView(generics.DestroyAPIView): queryset = Warrior.objects.all() class WarriorCreateAPIView(generics.CreateAPIView): queryset = Warrior.objects.all() serializer_class = WarriorCreateSerializer class ProfessionCreateAPIView(generics.CreateAPIView): queryset = Profession.objects.all() serializer_class = ProfessionSerializer","title":"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f"}]}